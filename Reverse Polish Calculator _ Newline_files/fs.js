(function(){var M=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,h){a.__proto__=h}||function(a,h){for(var e in h)h.hasOwnProperty(e)&&(a[e]=h[e])};return function(k,h){function e(){this.constructor=k}a(k,h);k.prototype=null===h?Object.create(h):(e.prototype=h.prototype,new e)}}(),N=this&&this.__awaiter||function(a,k,h,e){return new (h||(h=U))(function(d,b){function c(a){try{g(e.next(a))}catch(c){b(c)}}function f(a){try{g(e["throw"](a))}catch(c){b(c)}}
function g(a){a.done?d(a.value):(new h(function(b){b(a.value)})).then(c,f)}g((e=e.apply(a,k||[])).next())})},O=this&&this.__generator||function(a,k){function h(a){return function(b){return e([a,b])}}function e(g){if(b)throw new TypeError("Generator is already executing.");for(;d;)try{if(b=1,c&&(f=c[g[0]&2?"return":g[0]?"throw":"next"])&&!(f=f.call(c,g[1])).done)return f;if(c=0,f)g=[0,f.value];switch(g[0]){case 0:case 1:f=g;break;case 4:return d.label++,{value:g[1],done:!1};case 5:d.label++;c=g[1];
g=[0];continue;case 7:g=d.ops.pop();d.trys.pop();continue;default:if(!(f=d.trys,f=0<f.length&&f[f.length-1])&&(6===g[0]||2===g[0])){d=0;continue}if(3===g[0]&&(!f||g[1]>f[0]&&g[1]<f[3])){d.label=g[1];break}if(6===g[0]&&d.label<f[1]){d.label=f[1];f=g;break}if(f&&d.label<f[2]){d.label=f[2];d.ops.push(g);break}f[2]&&d.ops.pop();d.trys.pop();continue}g=k.call(a,d)}catch(e){g=[6,e],c=0}finally{b=f=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}var d={label:0,sent:function(){if(f[0]&1)throw f[1];
return f[1]},trys:[],ops:[]},b,c,f,g;return g={next:h(0),"throw":h(1),"return":h(2)},"function"===typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g},m;(function(a){var k;a.Namespace=function(a){if(!k){var e=a._fs_loaded;k=e?e:a._fs_namespace?a._fs_namespace:"FS"}return k};a.isLoaded=function(a){return a._fs_loaded};a.setLoaded=function(a,e){a._fs_loaded=e;e in a||(a[e]={})}})(m||(m={}));(function(a){a._fs_debug=function(a){return!!a._fs_ext_debug||!!a._fs_debug};a._fs_host=function(a){return a._fs_ext_host||
a._fs_host};a._fs_org=function(a){return a._fs_ext_org||a._fs_org};a._fs_csp=function(a){return a._fs_csp};a._fs_cookie_domain=function(a){return a._fs_cookie_domain};a._fs_ready=function(a){return a._fs_ready};a._fs_run_in_iframe=function(a){return!!a._fs_run_in_iframe};a._fs_is_outer_script=function(a){return!!a._fs_is_outer_script};a._fs_replay_flags=function(a){return a._fs_replay_flags};a._fs_transport=function(a){return a._fs_transport};a.set_fs_shutdown=function(a,h){a._fs_shutdown=h};a.FS_q_drain=
function(k){if((k=k[a.Namespace(k)])&&"q"in k){var h=k.q;delete k.q;return h}return[]};a.FS_q_push=function(k,h){var e=k[a.Namespace(k)];"q"in e||(e.q=[]);e.q.push(h)}})(m||(m={}));(function(a){a.CompiledTimestamp=1505253125;a.CompiledVersion="UNSET"})(m||(m={}));(function(a){function k(){var c,g;try{throw Error("");}catch(n){c="<generated>\n",g=n.stack||n.backtrace||n.stacktrace}if(!g){c="<generated-ie>\n";g=[];try{for(var l=arguments.callee.caller.caller;l&&g.length<e;){var h=b.test(l.toString())?
RegExp.$1||d:d;g.push(h);l=l.caller}}catch(p){a.logIfDebug(p)}g=g.join("\n")}return c+g}function h(b,c){var d=window.location.origin,e=(new Date).getTime(),h;try{h=window.self!==window.top}catch(p){h=!0}var d={projectRoot:d,"metaData[device][time]":e,"metaData[misc][inIframe]":h,"metaData[misc][CompiledTimestamp]":a.CompiledTimestamp,"metaData[misc][CompiledTime]":(new Date(1E3*a.CompiledTimestamp)).toISOString(),"metaData[misc][orgId]":a._fs_org(window),context:document.location.pathname,message:b.message,
name:"Recording Error",payloadVersion:3,releaseStage:"production "+(new Date(1E3*a.CompiledTimestamp)).toISOString(),severity:c,notfierVersion:"3.2.0",language:navigator.language||navigator.userLanguage||"en-GB",stacktrace:b.stack||(b.backtrace||b.stacktrace)||k(),apiKey:"38f089fdedbe27e3ca594fb18cdbc78e",ct:"img",cb:(new Date).getTime()},e=[],q;for(q in d)e.push(encodeURIComponent(q)+"="+encodeURIComponent(d[q]));(new Image).src="https://notify.bugsnag.com/js?"+e.sort().join("&")}var e=10,d="[anonymous]",
b=/function\s*([\w\-$]+)?\s*\(/i;a.generateStacktrace=k;a.sendToBugsnag=h;var c={};a.assert=function(a,b,d){void 0===d&&(d=1);if(a)return!0;c[b]=c[b]||0;c[b]++;if(c[b]>d)return!1;h(Error("Assertion failed: "+b),"error");return a}})(m||(m={}));(function(a){function k(){var a=0,b=new P(d),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){var b=a=++a%2;c.data=b+""}}function h(){var a=new MessageChannel;a.port1.onmessage=d;return function(){return a.port2.postMessage(0)}}
function e(){var a=setTimeout;return function(){return a(d,1)}}function d(){for(var a=0;a<B;a+=2)(0,E[a])(E[a+1]),E[a]=void 0,E[a+1]=void 0;B=0}function b(a,b){var c=arguments,g=this,d=new this.constructor(f);void 0===d[Q]&&z(d);var e=g._state;e?function(){var a=c[e-1];C(function(){return D(e,d,a,g._result)})}():r(g,d,a,b);return d}function c(a){if(a&&"object"===typeof a&&a.constructor===this)return a;var b=new this(f);q(b,a);return b}function f(){}function g(a){try{return a.then}catch(b){return J.error=
b,J}}function n(a,b,c,f,d){try{a.call(b,c,f)}catch(g){return g}}function l(a,b,c){C(function(a){var f=!1,g=n(c,b,function(c){f||(f=!0,b!==c?q(a,c):t(a,c))},function(b){f||(f=!0,u(a,b))},"Settle: "+(a._label||" unknown promise"));!f&&g&&(f=!0,u(a,g))},a)}function x(a,b){b._state===K?t(a,b._result):b._state===F?u(a,b._result):r(b,void 0,function(b){return q(a,b)},function(b){return u(a,b)})}function p(a,f,g){f.constructor===a.constructor&&g===b&&f.constructor.resolve===c?x(a,f):g===J?(u(a,J.error),
J.error=null):void 0===g?t(a,f):"function"===typeof g?l(a,f,g):t(a,f)}function q(a,b){a===b?u(a,new TypeError("You cannot resolve a promise with itself")):"function"===typeof b||"object"===typeof b&&null!==b?p(a,b,g(b)):t(a,b)}function s(a){a._onerror&&a._onerror(a._result);w(a)}function t(a,b){a._state===G&&(a._result=b,a._state=K,0!==a._subscribers.length&&C(w,a))}function u(a,b){a._state===G&&(a._state=F,a._result=b,C(s,a))}function r(a,b,c,f){var g=a._subscribers,d=g.length;a._onerror=null;g[d]=
b;g[d+K]=c;g[d+F]=f;0===d&&a._state&&C(w,a)}function w(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var f,g,d=a._result,e=0;e<b.length;e+=3)f=b[e],g=b[e+c],f?D(c,f,g,d):g(d);a._subscribers.length=0}}function y(){this.error=null}function D(a,b,c,f){var g="function"===typeof c,d,e,n,l;if(g){try{d=c(f)}catch(h){R.error=h,d=R}d===R?(l=!0,e=d.error,d.error=null):n=!0;if(b===d){u(b,new TypeError("A promises callback cannot return that same promise."));return}}else d=f,n=!0;b._state===G&&(g&&
n?q(b,d):l?u(b,e):a===K?t(b,d):a===F&&u(b,d))}function H(a,b){try{b(function(b){q(a,b)},function(b){u(a,b)})}catch(c){u(a,c)}}function z(a){a[Q]=S++;a._state=void 0;a._result=void 0;a._subscribers=[]}function v(a,b){this._instanceConstructor=a;this.promise=new a(f);this.promise[Q]||z(this.promise);L(b)?(this._input=b,this._remaining=this.length=b.length,this._result=Array(this.length),0===this.length?t(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&t(this.promise,
this._result))):u(this.promise,Error("Array Methods must be provided an Array"))}var m=void 0,L=m=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},B=0,C=function(a,b){E[B]=a;E[B+1]=b;B+=2;2===B&&T()},P=window.MutationObserver||window.WebKitMutationObserver,m="undefined"!==typeof Uint8ClampedArray&&void 0!=typeof self&&"undefined"!==typeof self.importScripts&&"undefined"!==typeof MessageChannel,E=Array(1E3),T;T=P?k():m?h():e();var Q=Math.random().toString(36).substring(16),
G=void 0,K=1,F=2,J=new y,R=new y,S=0;v.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===G&&c<a;c++)this._eachEntry(b[c],c)};v.prototype._eachEntry=function(a,d){var e=this._instanceConstructor,t=e.resolve;t===c?(t=g(a),t===b&&a._state!==G?this._settledAt(a._state,d,a._result):"function"!==typeof t?(this._remaining--,this._result[d]=a):e===A?(e=new e(f),p(e,a,t),this._willSettleAt(e,d)):this._willSettleAt(new e(function(b){return b(a)}),d)):this._willSettleAt(t(a),
d)};v.prototype._settledAt=function(a,b,c){var f=this.promise;f._state===G&&(this._remaining--,a===F?u(f,c):this._result[b]=c);0===this._remaining&&t(f,this._result)};v.prototype._willSettleAt=function(a,b){var c=this;r(a,void 0,function(a){return c._settledAt(K,b,a)},function(a){return c._settledAt(F,b,a)})};var A=function(a){this[Q]=S++;this._result=this._state=void 0;this._subscribers=[];if(f!==a){if("function"!==typeof a)throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
if(this instanceof A)H(this,a);else throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");}};A.all=function(a){return(new v(this,a)).promise};A.race=function(a){var b=this;return L(a)?new b(function(c,f){for(var d=a.length,g=0;g<d;g++)b.resolve(a[g]).then(c,f)}):new b(function(a,b){return b(new TypeError("You must pass an array to race."))})};A.resolve=c;A.reject=function(a){var b=new this(f);u(b,a);return b};A._setAsap=
function(a){C=a};A._asap=C;A.prototype={constructor:A,then:b,"catch":function(a){return this.then(null,a)}};a.Promise=window.Promise||A})(m||(m={}));var U=m.Promise;(function(a){a.windex=window;var k;a.initWindex=function(h){if(h.document&&h.document.head){if(k)try{a.windex.JSON.stringify(0);return}catch(e){}var d=h.document.head,b=h.document.createElement("iframe");b.id="FullStory-iframe";b.className="fs-hide";b.setAttribute("style","display: none;");d.appendChild(b);b.src="about:blank";k=b;a.windex=
k.contentWindow;h.document.head.removeChild(k);try{a.windex.JSON.stringify(0)}catch(c){a.windex=h}}}})(m||(m={}));(function(a){function k(b){return a.windex.Object.values.call(a.windex.Object,b||{})}function h(a){var b=[],c;for(c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b}function e(a){g&&window.console&&console.log(a)}function d(b,c){var f=0;try{a.windex.JSON.stringify(b,function(a,b){if(f++>c)throw"break";return"object"!=typeof b?void 0:b})}catch(d){if("break"!=d)return!0}return!1}function b(f,
d,g,e){if(1>d)return 0;var n;f&&f.constructor==Date?n=isNaN(f)?"Invalid Date":f.toUTCString():(n="object"===typeof Node?f instanceof Node:f&&"object"===typeof f&&0<f.nodeType&&"string"===typeof f.nodeName,n=n?c(f):void 0===f?"undefined":"object"!=typeof f||null==f?f:f instanceof Error?f.stack||f.name+": "+f.message:void 0);if(void 0!==n){n=a.windex.JSON.stringify(n);if(void 0===n)return 0;'"'==n[0]&&(n=x(n,d,'..."'));return n.length<=d?(e.tokens.push(n),n.length):0}if(e.catchCycles){e.opath.splice(g);
n=e.opath.lastIndexOf(f);if(-1<n)return f='"'+x("<Cycle to ancestor #"+(g-n-1)+">",d-2)+'"',e.tokens.push(f),f.length;e.opath.push(f)}var l=d,h=function(a){return l>=a.length?(l-=a.length,e.tokens.push(a),!0):!1};n=function(a){","==e.tokens[e.tokens.length-1]?e.tokens[e.tokens.length-1]=a:h(a)};if(2>l)return 0;if(a.isArray(f)){h("[");for(var p=0;p<f.length&&0<l;p++){var s=b(f[p],l-1,g+1,e),l=l-s;if(0==s&&!h("null"))break;h(",")}n("]")}else{h("{");for(var k=Object.keys(f),p=0;p<k.length&&0<l;p++){var s=
k[p],q=f[s];if(!h('"'+s+'":'))break;s=b(q,l-1,g+1,e);if(0==s){e.tokens.pop();break}l-=s;h(",")}n("}")}return Infinity==d?1:d-l}function c(a){if(a.tagName){var b=f(a);return"<"+b+(a.attributes&&a.attributes.type?' type="'+a.attributes.type.value+'"':"")+(a.id?' id="'+a.id+'"':"")+(a.className?' class="'+a.className+'"':"")+">...</"+b+">"}b="";a.data&&a.data.substring&&(b=" "+a.data.substring(0,50)+(50<a.data.length?"...":""));return a.nodeName+b}function f(a){return"object"==typeof a.tagName?"form":
a.tagName.toLowerCase()}var g=!1;a._native_bind=function(a,b){for(var c=[],f=2;f<arguments.length;f++)c[f-2]=arguments[f];return a.bind.apply(a,[b].concat(c))};a._js_bind=function(a,b){for(var c=[],f=2;f<arguments.length;f++)c[f-2]=arguments[f];return function(){var f=Array.prototype.slice.call(arguments);a.call.apply(a,[b].concat(c,f))}};a.bind=Function.prototype.bind?a._native_bind:a._js_bind;a._native_map=function(a,b,c){return a.map(b,c)};a._js_map=function(a,b,c){for(var f=Array(a.length),d=
0;d<a.length;d++)f[d]=b.call(c,a[d],d,a);return f};a.map=Array.prototype.map?a._native_map:a._js_map;a._native_trim=function(a){return a.trim()};a._js_trim=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")};a.trim=String.prototype.trim?a._native_trim:a._js_trim;a._native_filter=function(a,b,c){return a.filter(b,c)};a._js_filter=function(a,b,c){for(var f=Array(a.length),d=0;d<a.length;d++)f[d]=b.call(c,a[d],d,a);return f};a.filter=Array.prototype.filter?a._native_filter:a._js_filter;
var n=function(b){return a.windex.Array.isArray(b)},l=function(b){return"[object Array]"==a.windex.Object.prototype.toString.call(b)};a.isArray=a.windex.Array.isArray?n:l;a.prefix=function(a,b){return 0==a.lastIndexOf(b,0)};a.forIn=function(b,c){for(var f in b)a.windex.Object.hasOwnProperty.call(b,f)&&c(b[f],f,b)};a.firstKey=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return b};a.firstValue=function(a){for(var b in a)if(Object.prototype.hasOwnProperty.call(a,b))return a[b]};
a.hasNKeys=function(a,b){var c=0,f;for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&++c>b)return!1;return c==b};a.hasMoreThanNKeys=function(a,b){var c=0,f;for(f in a)if(Object.prototype.hasOwnProperty.call(a,f)&&++c>b)return!0;return!1};a._native_values=k;a._js_values=h;a.values=a.windex.Object.values?k:h;a.$entry=function(a,b){var c=function(){try{return a.apply(b||this,arguments)}catch(c){}};return window.Zone&&window.Zone.root&&"function"==typeof window.Zone.root.wrap?window.Zone.root.wrap(c):
c};a.initDebug=function(b){g=a._fs_debug(b)};a.isDebug=function(){return g};a.logIfDebug=e;a.stringify=function(a,c,f){void 0===c&&(c=Infinity);void 0===f&&(f=!0);try{var g={tokens:[],opath:[],catchCycles:f&&d(a,c/4)};b(a,c,0,g);return g.tokens.join("")}catch(e){a="Internal error: unable to determine what JSON error was";try{a=""+e,a=a.replace(/[^a-zA-Z0-9\.\:\!\, ]/g,"_")}catch(n){}return'"'+a+'"'}};var x=function(a,b,c){void 0===c&&(c="...");return a.length<=b?a:a.length<=c.length||b<=c.length?
a.substring(0,b):a.substring(0,b-c.length)+c};a.baseUri=function(a){return"string"==typeof a.baseURI?a.baseURI:(a=a.getElementsByTagName("base")[0])&&a.href?a.href:location.href};a.doctypeString=function(a){a=a.doctype;if(!a)return"";var b;b="<!DOCTYPE "+a.name;a.publicId&&(b+=' PUBLIC "'+a.publicId+'"');a.systemId&&(b+=' "'+a.systemId+'"');return b+">"};a.parseJson=function(b){return a.windex.JSON.parse(b)};a.domainFromHost=function(a){var b=a.indexOf(":");0<=b&&(a=a.slice(0,b));return a};a.isLocalhost=
function(a){return"localhost"==a||"127.0.0.1"==a};a.tryGetScreenDims=function(a){var b=0,c=0;if(null==a.screen)return[b,c];b=parseInt(String(a.screen.width));c=parseInt(String(a.screen.height));b=isNaN(b)?0:b;c=isNaN(c)?0:c;return[b,c]};n=function(){function a(){this._listeners=[];this._yesCapture=!0;this._noCapture=!1;try{var b=Object.defineProperty({},"passive",{get:function(){this._yesCapture={capture:!0,passive:!0};this._noCapture={capture:!1,passive:!0}}});window.addEventListener("test",function(){},
b)}catch(c){}}a.prototype.add=function(a,b,c,f){c={target:a,type:b,fn:function(a){f(a)},options:c?this._yesCapture:this._noCapture,index:this._listeners.length};this._listeners.push(c);a.addEventListener(b,c.fn,c.options);return c};a.prototype.remove=function(a){a.target&&(a.target.removeEventListener(a.type,a.fn,a.options),a.target=null,a.fn=void 0)};a.prototype.clear=function(){for(var a=0;a<this._listeners.length;a++)this._listeners[a].target&&this.remove(this._listeners[a]);this._listeners=[]};
return a}();a.DomListeners=n;var p=function(){function a(b,c){this.target=b;this.propertyName=c;this.attached=this.on=!1;this.native=b[c]}a.prototype.before=function(a){this._before=a;return this};a.prototype.afterAsync=function(a){this._afterAsync=a;return this};a.prototype.afterSync=function(a){this._afterSync=a;return this};a.prototype.disable=function(){this.on=!1;this.target[this.propertyName]==this.shim&&(this.target[this.propertyName]=this.native,this.attached=!1)};a.prototype.enable=function(){this.on=
!0;this.attached||(this.shim||(this.shim=this.makeShim()),this.target[this.propertyName]=this.shim,this.attached=!0)};a.prototype.makeShim=function(){var a=this;return function(){var b={that:this,args:arguments};if(a.on)try{a._before&&a._before.call(this,b)}catch(c){e("Error in hook before "+a.propertyName)}var f=a.native.apply(this,arguments);if(a.on)try{if(a._afterSync&&a._afterSync.call(this,b),a._afterAsync){var d=this;setTimeout(function(){try{a._afterAsync.call(d,b)}catch(c){e("Error in async hook after "+
a.propertyName)}})}}catch(g){e("Error in hook after "+a.propertyName)}return f}};return a}(),q={},s;a.activateHook=function(a,b){if("function"!=typeof a[b])return e("Error: Can't hook non-function: "+b),s||(s=new p({a:function(){}},"a"));q[b]=q[b]||[];for(var c,f=0;f<q[b].length;f++)q[b][f].obj==a&&(c=q[b][f].hook);c||(c=new p(a,b),q[b].push({obj:a,hook:c}));c.enable();return c};a.tagName=f;a.wait=function(b){return new a.Promise(function(a){setTimeout(function(){return a()},b)})}})(m||(m={}));(function(a){a.EVENT_MUT_INSERT=
2;a.EVENT_MUT_REMOVE=3;a.EVENT_MUT_ATTR=4;a.EVENT_MUT_ATTR_CURVE=5;a.EVENT_MUT_TEXT=6;a.EVENT_MUT_SKIPIDS=7;a.EVENT_MOUSEMOVE=8;a.EVENT_MOUSEMOVE_CURVE=9;a.EVENT_SCROLL=10;a.EVENT_SCROLL_CURVE=11;a.EVENT_MOUSEDOWN=12;a.EVENT_MOUSEUP=13;a.EVENT_KEYDOWN=14;a.EVENT_KEYUP=15;a.EVENT_CLICK=16;a.EVENT_FOCUS=17;a.EVENT_VALUECHANGE=18;a.EVENT_RESIZE=19;a.EVENT_DOMLOADED=20;a.EVENT_LOAD=21;a.EVENT_PLACEHOLDER_SIZE=22;a.EVENT_UNLOAD=23;a.EVENT_BLUR=24;a.EVENT_SET_FRAME_BASE=25;a.EVENT_TOUCHSTART=32;a.EVENT_TOUCHEND=
33;a.EVENT_TOUCHCANCEL=34;a.EVENT_TOUCHMOVE=35;a.EVENT_TOUCHMOVE_CURVE=36;a.EVENT_NAVIGATE=37;a.EVENT_PLAY=38;a.EVENT_PAUSE=39;a.EVENT_INNERWIDTH=40;a.EVENT_INNERWIDTH_CURVE=41;a.EVENT_LOG=48;a.EVENT_ERROR=49;a.EVENT_DBL_CLICK=50;a.EVENT_FORM_SUBMIT=51;a.EVENT_WINDOW_FOCUS=52;a.EVENT_WINDOW_BLUR=53;a.EVENT_HEARTBEAT=54;a.EVENT_WATCHED_ELEM=56;a.PerfEntryTiming=0;a.PerfEntryNavigation=1;a.PerfEntryResource=2;a.PerfEntryPaint=3;a.PerfEntryMark=4;a.PerfEntryMeasure=5;a.PerfEntryMemory=6;a.EVENT_PERF_ENTRY=
57;a.RecFeaturePerformance=0;a.RecFeaturePerformanceEntries=1;a.RecFeaturePerformanceMemory=2;a.EVENT_REC_FEAT_SUPPORTED=58;a.EVENT_SELECT=59;a.EVENT_SYS_SETMETA=8192;a.EVENT_SYS_SETVAR=8193;a.EVENT_SYS_HIGHLIGHT=8194;a.EVENT_SYS_RESOURCEHASH=8195;a.EVENT_COOKED_LOAD="load";a.EVENT_COOKED_UNLOAD="unload";a.EVENT_COOKED_NAVIGATE="navigate";a.EVENT_COOKED_CLICK="click";a.EVENT_COOKED_TAP="tap";a.EVENT_COOKED_FOCUS="focus";a.EVENT_COOKED_CHANGE="change";a.EVENT_COOKED_MOUSE_THRASH="thrash";a.EVENT_FORM_ABANDONED=
"abandon";a.EVENT_COOKED_ELEM_SEEN="seen";a.isUserActionEvent=function(k){switch(k){case a.EVENT_MOUSEDOWN:case a.EVENT_MOUSEMOVE:case a.EVENT_MOUSEMOVE_CURVE:case a.EVENT_MOUSEUP:case a.EVENT_KEYDOWN:case a.EVENT_KEYUP:case a.EVENT_TOUCHSTART:case a.EVENT_TOUCHEND:case a.EVENT_TOUCHMOVE:case a.EVENT_TOUCHMOVE_CURVE:case a.EVENT_TOUCHCANCEL:case a.EVENT_CLICK:case a.EVENT_SCROLL:case a.EVENT_SCROLL_CURVE:case a.EVENT_NAVIGATE:return!0}return!1};a.MAX_LOGS_PER_PAGE=1024})(m||(m={}));(function(a){a.HighlightTypeFsId=
"fsidentity";a.HighlightTypeNewUid="newuid";a.UID_COOKIE="fs_uid";a.BAD_APP_IDS=" 0 1 -1 n/a nan undefined null nil the_id_that_you_use_in_your_app_for_this_user".split(" ");var k=function(){function h(a){void 0===a&&(a=document);this._doc=a;this._cookies={}}h.prototype.initFromCookies=function(e,d){for(var b=this._doc.cookie.split(";"),c=0;c<b.length;c++){var f=b[c].replace(/^\s+|\s+$/g,"").split("="),g=f[0];this._cookies[g]||(this._cookies[g]=f[1])}var n=this._cookies[a.UID_COOKIE],l=g=f=c=b="";
if(n){var h=n.split("`");3>h.length?b=n:(f=h[0],g=h[1],b=h[2],5<=h.length&&(l=decodeURIComponent(h[3]),0<=a.BAD_APP_IDS.indexOf(l)&&(a.logIfDebug('ignoring invalid app key "'+l+'" from cookie.'),l="")))}n=b.indexOf(":");-1!=n&&(c=b.slice(n+1),b=b.slice(0,n));this._cookie={Host:f,OrgId:g,UserId:b,SessionId:c,AppKey:l};if(this._cookie.Host.replace(/^www\./,"")!=e.replace(/^www\./,"")||this._cookie.OrgId!=d)this._cookie={Host:e,OrgId:d,UserId:"",SessionId:"",AppKey:""}};h.prototype.initFromParsedCookie=
function(a){this._cookie=a};h.prototype.clear=function(){var a=this.host(),d=this.orgId();this._cookie={Host:a,OrgId:d,UserId:"",SessionId:"",AppKey:""};this.write()};h.prototype.host=function(){return this._cookie.Host};h.prototype.orgId=function(){return this._cookie.OrgId};h.prototype.userId=function(){return this._cookie.UserId};h.prototype.sessionId=function(){return this._cookie.SessionId};h.prototype.appKey=function(){return this._cookie.AppKey};h.prototype.cookieData=function(){return this._cookie};
h.prototype.cookies=function(){return this._cookies};h.prototype.setCookie=function(a,d){var b=a+"="+d,b=this._domain?b+("; domain=."+encodeURIComponent(this._domain)):b+"; domain=";this._doc.cookie=b+"; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/"};h.prototype.setIds=function(e,d,b,c){a.isLocalhost(d)&&(d="");e=a._fs_cookie_domain(e);"string"==typeof e&&(d=e);this._domain=d;this._cookie.UserId=b;this._cookie.SessionId=c;this.write()};h.prototype.clearAppId=function(){if(!this._cookie.AppKey)return!1;
this._cookie.AppKey="";this.write();return!0};h.prototype.setAppId=function(a){this._cookie.AppKey=a;this.write()};h.prototype.encode=function(){var a=this._cookie.Host+"`"+this._cookie.OrgId+"`"+this._cookie.UserId+":"+this._cookie.SessionId;this._cookie.AppKey&&(a+="`"+encodeURIComponent(this._cookie.AppKey)+"`");return a};h.prototype.write=function(){null!=this._domain&&this.setCookie(a.UID_COOKIE,this.encode())};return h}();a.Identity=k})(m||(m={}));(function(a){var k=function(){function h(a){this._identity=
a;this.AccountSystemVars={acctId:"str",displayName:"str",website:"str"};this.UserSystemVars={uid:"str",displayName:"str",email:"str"};this.VarTypes={str:function(a){return"string"==typeof a},bool:function(a){return"boolean"==typeof a},"int":function(a){return"number"==typeof a&&0==a-Math.floor(a)},real:function(a){return"number"==typeof a},date:function(a){return a?!isNaN(a.constructor===Date?a:new Date(a)):!1}}}h.prototype.identity=function(){return this._identity};h.prototype.transformValidateAppId=
function(e,d){"number"==typeof e&&e===e>>0&&(a.logIfDebug("Expected appId of type 'string' instead got value: "+e+" of type: "+typeof e),e=""+e);if("string"!=typeof e)return a.logIfDebug("blocking FS.identify API call; uid value ("+e+") must be a string"),[void 0,a.HighlightTypeFsId];var b=e.trim();if(0<=a.BAD_APP_IDS.indexOf(b.toLowerCase()))return a.logIfDebug("blocking FS.identify API call; uid value ("+e+") is illegal"),[void 0,a.HighlightTypeFsId];var c=void 0;d._cookie.AppKey&&d._cookie.AppKey!=
b&&(a.logIfDebug("user re-identified; existing uid ("+d._cookie.AppKey+") does not match provided uid ("+b+")"),c=a.HighlightTypeNewUid);return[b,c]};h.prototype.api=function(e,d){var b=!1,c=[];switch(e){case "account":c=c.concat(this.setvar_api("acct",this.AccountSystemVars,d));break;case "user":if("object"!=typeof d)a.logIfDebug("Expected argument of type 'object' instead got type: '"+typeof d+"', value: "+a.stringify(d));else if("uid"in d){var f=d.uid;if(!1===f)this._identity.clearAppId()&&(b=
!0),delete d.uid;else{var g=this.transformValidateAppId(f,this._identity),f=g[0],g=g[1];if(!f){switch(g){case a.HighlightTypeFsId:c.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:[a.HighlightTypeFsId,d.uid+""]});break;case void 0:break;default:a.logIfDebug("unexpected failReason returned from setAppId: "+g)}return[c,!1]}d.uid=f;this._identity.setAppId(d.uid);g==a.HighlightTypeNewUid&&(b=!0)}}c=c.concat(this.setvar_api("user",this.UserSystemVars,d));break;default:a.logIfDebug('invalid operation "'+e+
'"; only "account" and "user" are supported at present')}return[c,b]};h.prototype.setvar_api=function(e,d,b){var c=[],f={},g;for(g in b)if(b.hasOwnProperty(g)){var n=b[g];a.logIfDebug("set-var('"+e+"'): \""+g+'" = '+a.stringify(n));var l=typeof n;if("object"!==l||n&&n.constructor==Date){var h,p;if(g in d)h=g,p=d[g];else{p=g.split("_");if(2!=p.length){a.logIfDebug('variables must be of the form "name_type", where "type" is one of [str, bool, int, real, date]');c.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,
Args:["varname",e+":"+g]});continue}-1!=g.indexOf(" ")?(h=g.replace(/ /g,""),c.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",e+":"+g]}),a.logIfDebug("Warning: variable '"+g+"' has spaces in it, which is disallowed. Converted name to '"+h+"'.")):h=g;p=p[1]}p in this.VarTypes?this.VarTypes[p](n)?("str"==p&&(n=n.trim()),"date"==p&&(n=this.toIsoString(n)),f[h]=n):(a.logIfDebug("illegal value "+a.stringify(n)+" for type "+p),"number"===l?l=0==n-Math.floor(n)?"integer":"real":"object"==l&&(null!=
n&&n.constructor==Date)&&(l=isNaN(n)?"invalid date":"date"),c.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["vartype",e+":"+g,l]})):(a.logIfDebug('invalid type "'+p+'"'),c.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["varname",e+":"+g]}))}else n instanceof Array&&(l="array"),c.push({When:0,Kind:a.EVENT_SYS_HIGHLIGHT,Args:["vartype",e+":"+g,l+" (unsupported)"]})}c.push({When:0,Kind:a.EVENT_SYS_SETVAR,Args:[e,a.stringify(f)]});return c};h.prototype.toIsoString=function(a){return(a.constructor===Date?
a:new Date(a)).toISOString()};return h}();a.Vars=k})(m||(m={}));var I;(function(a){var k=/(?:[^\\](?:\\\\)*)/.source;a.CSS_URL=RegExp('url\\(\\s*"(.*?'+k+")\"\\s*\\)|url\\(\\s*'(.*?"+k+")'\\s*\\)|url\\((.*?"+k+")\\)","g");a.QUOTES=/\"|'/g;a.HOVER=/\:hover/g;a.FOCUS=/\:focus/g;a.MEDIA_QUERY=/(@media.*?{)/g;a.DOMAIN=/^[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]\.[a-zA-Z]{2,}$/;a.DOMAIN_PART=/^[a-zA-Z0-9-:]{1,61}$/;a.IPv4_PART=/^[0-9]{1,3}$/;a.IPv6_PART=/^[0-9a-f]{0,4}$/;a.PLAYBACK_URL_PARAMS=/.*\?Base=(.*)&Url=(.*)/;
a.EMAIL=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;a.IMAGE_FILENAME=/\.(jpe?g|png|svg|gif|bmp)$/;a.ATTR_SELECTOR=/\[.*\]/g;a.SVG_NS=/svg\:/g})(I||(I={}));(function(a){var k=function(){function a(d,b){this.parent=d;this.combinator=b;this.classes={};this.attrs={};this.attrMatch={}}a.prototype.cssEscapeIdent=function(a){var b=function(a){return-1!="[]:./\\()@#%^&*'\" ".indexOf(a)?"\\"+a:"\\"+
a.charCodeAt(0).toString(16)+" "};return"-"==a?"\\-":"-"==a[0]?"-"+a.slice(1).replace(/([^0-9a-zA-Z-_])/g,b):a.replace(/[^0-9a-zA-Z-_:]/g,b)};a.prototype.cssEscapeString=function(a){return'"'+a.replace(/[\x01-\x1f\"\\]/g,function(a){return'"'==a||"\\"==a?"\\"+a:"\\"+a.charCodeAt(0).toString(16)+" "})+'"'};a.prototype.serialize=function(){var a=this.combinator?this.combinator:"";this.tag&&(a+="*"==this.tag?this.tag:this.cssEscapeIdent(this.tag));this.id&&(a+="#"+this.cssEscapeIdent(this.id));var b=
Object.keys(this.classes);b.sort();for(var c=0;c<b.length;c++)a+="."+this.cssEscapeIdent(b[c]);for(var f in this.attrs)a=""==this.attrMatch[f]?a+("["+this.cssEscapeIdent(f)+"]"):a+("["+this.cssEscapeIdent(f)+this.attrMatch[f]+this.cssEscapeString(this.attrs[f])+"]");return a};return a}();a.SelectorRule=k;var h=function(){function a(d){this.rules=d}a.parse=function(d,b,c){void 0===b&&(b=null);d=d.trim();var f=new k(null,null),g=0,n=!1,l=function(){throw"Invalid selector";},h=function(){r=d[++g];if("\n"==
r||null==r)throw l();if(r.match(/[0-9a-fA-F]/)){var a="";do a+=r,r=d[++g];while(r&&r.match(/[0-9a-fA-F]/));r&&r.match(/[\s]/)&&g++;return String.fromCharCode(parseInt(a,16))}g++;return r},p=function(a){for(var b=g,c="",f;null!=(f=d[g]);)if("\\"==f)c+=h();else if(f.match(a?/[a-zA-Z0-9_:\-]/:/[a-zA-Z0-9_\-]/)||128<f.charCodeAt(0))c+=f,g++;else break;if(b==g)throw l();return c},q=function(){for(;null!=d[g]&&d[g].match(/\s/);)g++},s=function(){n=!0;g++;var a=p().toLowerCase();try{var c;q();var e=d[g],
s="=";if("*"==e||"|"==e||"^"==e||"$"==e||"~"==e)s=e+"=",g++;if(b&&!b[s])throw l();if("="!=d[g])throw l();g++;q();c=s}catch(k){if(b&&!b["[]"]||"Invalid selector"!=k)throw k;if("]"!=d[g])throw l();g++;f.attrs[a]=f.attrMatch[a]="";return}r=d[g];'"'==r||"'"==r?(e=r,g++):e="]";for(s="";(r=d[g])!=e;){if(null==r)throw l();if("\\"==r)s+=h();else{if("]"==e&&('"'==r||"'"==r))throw l();s+=r;g++}}g++;"]"!=e&&"]"==d[g]&&g++;f.attrs[a]=s;f.attrMatch[a]=c},t=function(){if(!n)throw l();n=!1;q();var a=d[g];">"==a||
"+"==a||"~"==a?(g++,q()):a=" ";f=new k(f,a);if(b&&!b[a])throw l();};if(0==d.indexOf("//"))throw l();for(var u=0,g=0;g<d.length;){if(u++>2*d.length)throw console.log("Likely caught in an infinite loop while parsing "+d),"Internal error, infinite loop";var r=d[g];switch(r){case "#":n=!0;g++;f.id=p();break;case "*":if(n)throw l();n=!0;f.tag="*";if(b&&!b["*"])throw l();g++;break;case ".":n=!0;g++;f.classes[p()]=!0;break;case "[":s();break;case " ":case ">":case "+":case "~":t();break;case ":":throw l();
default:if(n)throw l();n=!0;f.tag=p(c).toLowerCase()}}if(!n)throw l();return new a(f)};a.prototype.serialize=function(){for(var a=null,b=this.rules;b;b=b.parent)a=a?b.serialize()+a:b.serialize();return a};return a}();a.Selector=h})(m||(m={}));(function(a){function k(a){var c={};if(!a)return c;if(a.classList)for(var f=0;f<a.classList.length;++f)c[a.classList[f]]=!0;else if(a.className)for(a=(a.getAttribute("class")||"").split(" "),f=0;f<a.length;++f)c[a[f].trim()]=!0;return c}a.WatchKindNYI="nyi";
a.WatchKindBlocked="blocked";a.WatchKindHide="hide";a.WatchKindWatch="watch";var h=function(){function b(a,b){this._parent=a;this._rule=b}b.prototype.parent=function(){return this._parent};b.prototype.matches=function(c,f){if(!c||this._rule.tag&&a.tagName(c)!=this._rule.tag||this._rule.id&&c.id!=this._rule.id)return!1;for(var g in this._rule.classes)if(!(g in f))return!1;for(var d in this._rule.attrs)if(g=c.getAttribute(d),null==g||!b.attrPredicates[this._rule.attrMatch[d]](g,this._rule.attrs[d]))return!1;
return this._parent?this._parent.matches(c.parentElement,k(c.parentElement)):!0};b.attrPredicates={"":function(a,b){return!0},"=":function(a,b){return a==b},"*=":function(a,b){return-1<a.indexOf(b)},"^=":function(a,b){return 0==a.lastIndexOf(b,0)},"$=":function(a,b){return a.indexOf(b,a.length-b.length)+b.length==a.length},"~=":function(a,b){return-1<a.split(/\s+/).indexOf(b)},"|=":function(a,b){return-1<a.split("-").indexOf(b)}};return b}();a.WatchRuleElem=h;var e=function(){function b(b){this.kind=
b.Kind;this.selector=a.Selector.parse(b.Selector,{">":!0,"=":!0,"[]":!0,"*=":!0,"^=":!0,"$=":!0,"~=":!0,"|=":!0});var f=function(a){return new h(a.parent?f(a.parent):null,a)};this.rules=f(this.selector.rules)}b.isComment=function(a){return!!a.match(/^\s*\/\//)};b.prototype.serialize=function(){return this.selector.serialize()};return b}();a.WatchRule=e;var d=function(){function b(){this._rules=[];this._predicateRules=[];this.rawRules=[]}b.prototype.isWatched=function(a){for(var b=0;b<this._predicateRules.length;++b)if(this._predicateRules[b].Selector(a))return this._predicateRules[b].Kind;
for(var g=k(a),b=0;b<this._rules.length;++b)if(this._rules[b].rules.matches(a,g))return this._rules[b].kind;return null};b.prototype.addRule=function(b){try{return e.isComment(b.Selector)||(this._rules.push(new e(b)),this.rawRules.push(b)),!0}catch(f){return a.sendToBugsnag(f,"error"),!1}};b.prototype.addPredicateRule=function(a){this._predicateRules.push(a)};b.prototype.mungeWatchedStyle=function(b,f){var g=b.getBoundingClientRect(),d=Math.floor(g.width),g=Math.floor(g.height);if("object"==a.tagName(b))for(var e=
b.children,h=0;h<e.length;h++){var p=e[h];if("embed"==a.tagName(p)){e=p.getBoundingClientRect();d=Math.max(d,Math.floor(e.width));g=Math.max(g,Math.floor(e.height));break}}e="";null!=f&&(e=f.trim());0<e.length&&";"!=e.charAt(e.length-1)&&(e+=";");if(0!=d||0!=g)e+="width:"+d+"px;height:"+g+"px;";return e};return b}();a.Watcher=d})(m||(m={}));(function(a){a.MutationProcessingInterval=250;a.CurveSamplingInterval=142;a.UploadInterval=5E3;a.UserInactivityTimeout=1E4;a.HeartbeatInitial=4E3;a.HeartbeatMax=
256E3;a.PageInactivityTimeout=18E5;a.BackoffMax=3E5;a.ScrollSampleInterval=a.MutationProcessingInterval/5;a.InactivityThreshold=4E3})(m||(m={}));(function(a){var k=function(){function a(d,b,c){this._ctx=d;this._q=b;this._valueIndices=c;this._evts=[]}a.prototype.add=function(a){0==this._evts.length&&this._q.push(a);this._evts.push(a)};a.prototype.finish=function(a,b){var c=this._evts.length;if(1>=c)return!1;for(var f=this._evts[0].When,g=this._evts[c-1].When,e=0;e<this._valueIndices.length;++e){var l=
this._valueIndices[e],h=this._evts[0].Args[l],p=(this._evts[1].When-f)/(g-f),k=(this._evts[1].Args[l]-h)/p,s=this._evts[c-1].Args[l],p=(g-this._evts[c-2].When)/(g-f);b.push(h,s,k,(s-this._evts[c-2].Args[l])/p)}this._evts[0].Kind=a;this._evts[0].Args=b;return!0};a.prototype.evts=function(){return this._evts};return a}(),h=function(){function e(a){this._ctx=a;this._gotInitialScroll=!1}e.prototype.processQueue=function(d){if(0==d.length)return d;for(var b=this._ctx.now(),c=[],f=new k(this._ctx,c,[0,
1]),g={},e={},h,x=0;x<d.length;++x){var p=d[x];switch(p.Kind){case a.EVENT_MOUSEMOVE:f.add(p);break;case a.EVENT_TOUCHMOVE:var q=p.Args[0];q in g||(g[q]=new k(this._ctx,c,[1,2]));g[q].add(p);break;case a.EVENT_SCROLL:q=p.Args[0];q in e||(e[q]=new k(this._ctx,c,[1,2]));e[q].add(p);break;case a.EVENT_INNERWIDTH:h||(h=new k(this._ctx,c,[0]));h.add(p);break;default:c.push(p)}}f.finish(a.EVENT_MOUSEMOVE_CURVE,[b])&&(d=f.evts(),f=d[d.length-1].Args,2<f.length&&f[2]&&d[0].Args.push(f[2]));for(q in e)d=parseInt(q),
e[d].finish(a.EVENT_SCROLL_CURVE,[b,d]);for(q in g)d=parseInt(q),g[d].finish(a.EVENT_TOUCHMOVE_CURVE,[b,d]);h&&h.finish(a.EVENT_INNERWIDTH_CURVE,[b]);return c};return e}();a.EventProcessor=h})(m||(m={}));(function(a){a.Node_ELEMENT_NODE=1;a.Node_ATTRIBUTE_NODE=2;a.Node_TEXT_NODE=3;a.Node_CDATA_SECTION_NODE=4;a.Node_ENTITY_REFERENCE_NODE=5;a.Node_ENTITY_NODE=6;a.Node_PROCESSING_INSTRUCTION_NODE=7;a.Node_COMMENT_NODE=8;a.Node_DOCUMENT_NODE=9;a.Node_DOCUMENT_TYPE_NODE=10;a.Node_DOCUMENT_FRAGMENT_NODE=
11;a.Node_NOTATION_NODE=12;a.XHR_UNSENT=0;a.XHR_OPENED=1;a.XHR_HEADERS_RECEIVED=2;a.XHR_LOADING=3;a.XHR_DONE=4})(m||(m={}));(function(a){function k(e,d){var b=Math.min(a.BackoffMax,5E3*Math.pow(2,e));return d?b+0.25*Math.random()*b:b}var h=function(){function e(){}e.prototype.postPromise=function(d,b,c,f){var g=this;return new a.Promise(function(a,e){g.post(d,b,c,f,a,e)})};return e}();a.HttpPoster=h;h=function(e){function d(){return null!==e&&e.apply(this,arguments)||this}M(d,e);d.prototype.post=
function(b,c,f,g,d,e){c="//"+c+f;var h=!1,p=new XMLHttpRequest;if("withCredentials"in p)p.onreadystatechange=function(){if(p.readyState==a.XHR_DONE&&!h){h=!0;try{200==p.status?d(p.responseText):e&&e(p.status)}catch(b){a.sendToBugsnag(b,"error")}}},p.open("POST",b+c,!0),p.withCredentials=!0,g instanceof FormData||p.setRequestHeader("Content-Type","text/plain"),p.send(g);else{var k=new XDomainRequest;k.onload=function(){d(k.responseText)};k.onerror=function(){e&&e("Not Found"==k.responseText?404:500)};
k.onprogress=function(){};k.open("POST",c);k.send(g)}};d.prototype.sendBeacon=function(a,c,f,g){return"function"==typeof navigator.sendBeacon?(navigator.sendBeacon(a+"//"+c+f,g),!0):!1};d.prototype.exponentialBackoffMs=function(a,c){return k(a,c)};return d}(h);a.XHRPoster=h;a.exponentialBackoffMs=k;a.isErrorFatal=function(a){return 400<=a||202==a?!0:!1};a.gceHost=function(e){return a.isLocalhost(a.domainFromHost(e))?e:0==e.indexOf("www.")||0==e.indexOf("app.")?"r."+e.slice(4):"r."+e}})(m||(m={}));
(function(a){function k(b,c){return a.stringify({__fs:[b,c?c:""]})}function h(a,c,f,g,d,e,h){a="/rec/bundle?OrgId="+a+"&UserId="+c+"&SessionId="+f+"&PageId="+g+"&Seq="+d.Seq;e&&(a+="&PageStartTime="+e);h&&(a+="&DeltaT="+h);return a}var e=function(){function b(a,b){void 0===b&&(b=new d);this._wnd=a;this._messagePoster=b}b.prototype.enqueueEvents=function(b){this._messagePoster.postMessage(this._wnd.parent,a.FS_IFRAME_EVENTS,b)};b.prototype.startPipeline=function(a){};b.prototype.stopPipeline=function(){};
b.prototype.flush=function(){};b.prototype.singSwanSong=function(){};return b}();a.PostMessageEventTransport=e;var d=function(){function b(){}b.prototype.postMessage=function(b,f,g){var d;try{d=a._fs_transport(b)}catch(e){}d?d.send(f,a.stringify(g)):b.postMessage(k(f,g),"*")};return b}();a.PostMessagePoster=d;a.formatPostMessageData=k;e=function(){function b(b,f,g,d,e){void 0===g&&(g=a.RealTicker);void 0===d&&(d=a.RealTimeout);void 0===e&&(e=new a.XHRPoster);this._ctx=b;this._onShutdown=f;this._tickerFactory=
g;this._timeoutFactory=d;this._poster=e;this._backoffTime=this._backoffRetries=this._byteCount=0;this._bundleSeq=1;this._lastPostTime=0;this._largeBundleSize=8E6;this._largePageSize=16E6;this._outgoingEventQueue=[];this._bundleQueue=[];this._bundleHost=a.gceHost(b.getHost());this._protocol=b.getProtocol();this._identity=b.getIdentity();this._lastBundleTime=b.wallTime();this._uploadTicker=new this._tickerFactory(a.UploadInterval);this._swanSong=new a.SwanSong(b,this,d)}b.prototype.protocol=function(){return this._protocol};
b.prototype.enqueueEvents=function(a){this._outgoingEventQueue=this._outgoingEventQueue.concat(a)};b.prototype.startPipeline=function(a){var b=this;this._pageId=a;this.enqueueAndSendBundle();this._uploadTicker.start(function(){b.enqueueAndSendBundle()})};b.prototype.stopPipeline=function(){this._uploadTicker.stop();this._outgoingEventQueue=[];this._bundleQueue=[]};b.prototype.flush=function(){this.maybeSendNextBundle()};b.prototype.singSwanSong=function(){0<this._outgoingEventQueue.length&&this.enqueueNextBundle(!0);
if(0<this._bundleQueue.length||this._pendingBundle){var a=this._bundleQueue.concat();this._pendingBundle&&a.unshift(this._pendingBundle);this._swanSong.sing(this._pageId,a,this._lastBundleTime)}};b.prototype.sendSwanSongBundle=function(a,b,g,d,e,k,p,q,s){a=h(a,b,g,d,e,k,p);this.post(a,e,q,s)};b.prototype.enqueueAndSendBundle=function(){this._pendingBundle?this._pendingBundleFailed&&this._sendPendingBundle():0==this._outgoingEventQueue.length?this.maybeSendNextBundle():this.enqueueNextBundle()};b.prototype.enqueueNextBundle=
function(b){void 0===b&&(b=!1);var f={When:this._outgoingEventQueue[0].When,Seq:this._bundleSeq++,Evts:this._outgoingEventQueue};this._outgoingEventQueue=[];this._bundleQueue.push(f);b&&this._poster.sendBeacon(this._protocol,this._bundleHost,this.bundleUrl(f),a.stringify(f))||this.maybeSendNextBundle()};b.prototype.maybeSendNextBundle=function(){this._pageId&&(!this._pendingBundle&&0!=this._bundleQueue.length)&&(this._pendingBundle=this._bundleQueue.shift(),this._sendPendingBundle())};b.prototype._sendPendingBundle=
function(){var b=this,f=this._ctx.wallTime();if(!(f<this._backoffTime)){var d=this._pendingBundle;d&&(this._pendingBundleFailed=!1,this._lastPostTime=this._lastBundleTime=f,this.sendBundle(d,function(f){d&&a.logIfDebug("Sent bundle "+d.Seq+" with "+d.Evts.length+" events");b._pendingBundle=null;b._backoffTime=0;b._backoffRetries=0;b._ctx.wallTime()-b._lastPostTime>a.UploadInterval&&b.maybeSendNextBundle()},function(f){a.logIfDebug("Failed to send events.");a.isErrorFatal(f)?b._onShutdown():(b._pendingBundleFailed=
!0,b._backoffTime=b._lastPostTime+b._poster.exponentialBackoffMs(b._backoffRetries++,!1))}))}};b.prototype.sendBundle=function(a,b,d){this.post(this.bundleUrl(a),a,b,d)};b.prototype.bundleUrl=function(a){return h(this._identity.orgId(),this._identity.userId(),this._identity.sessionId(),this._pageId,a)};b.prototype.post=function(b,f,d,e){var h="";null!=f&&(h=a.stringify(f),this._byteCount+=h.length,a.assert(h.length<this._largeBundleSize,"Large bundle of "+h.length+" bytes was sent to: "+b),a.logIfDebug("total bytes written: "+
this._byteCount));this._poster.post(this._protocol,this._bundleHost,b,h,d,e)};return b}();a.HttpEventTransport=e})(m||(m={}));(function(a){var k=function(){function a(){this.dict={idx:-1,map:{}};this.nodeCount=1;this.startIdx=0}a.prototype.encode=function(e){function d(){f?1<l?g.push([f.idx,l]):g.push(f.idx):g.push(b)}if(0==e.length)return[];var b=e[0],c,f=Object.prototype.hasOwnProperty.call(this.dict.map,b)?this.dict.map[b]:null,g=[],n,l=1;for(c=1;c<e.length;c++)if(n=e[c],f&&Object.prototype.hasOwnProperty.call(f.map,
n))l++,b=n,f=f.map[n];else{d();var k=this.startIdx+c-l;null==f&&this.nodeCount<a.MAX_NODES&&(f={idx:k,map:{}},this.dict.map[b]=f,this.nodeCount++);f&&this.nodeCount<a.MAX_NODES&&(f.map[n]={idx:k,map:{}},this.nodeCount++);l=1;b=n;f=Object.prototype.hasOwnProperty.call(this.dict.map,n)?this.dict.map[n]:null}d();this.startIdx+=e.length;return g};a.MAX_NODES=1E4;return a}();a.LZJGWEncoder=k;k=function(){function a(){this._seq=[]}a.prototype.sequence=function(){return this._seq};a.prototype.decode=function(a){for(var d=
this._seq.length,b=0;b<a.length;++b){var c=a[b];switch(typeof c){case "string":this._seq.push(c);break;case "number":this._seq.push(this._seq[c]);break;case "object":if(null==c){this._seq.push("");break}for(var f=0;f<c[1];f++)this._seq.push(this._seq[c[0]+f])}}return d};return a}();a.LZJGWDecoder=k})(m||(m={}));(function(a){var k=function(){function h(e,d,b){void 0===b&&(b=a.RealTimeout);this._ctx=e;this._transport=d;this._timeoutFactory=b;this._recover();this._identity=e.getIdentity()}h.prototype.sing=
function(e,d,b){a.logIfDebug("Saving "+d.length+" bundles in swan-song.");e={OrgId:this._identity.orgId(),UserId:this._identity.userId(),SessionId:this._identity.sessionId(),PageId:e,Bundles:d,PageStartTime:this._ctx.startTime(),LastBundleTime:b};try{localStorage.singSwanSong=a.stringify(e)}catch(c){}};h.prototype._recover=function(){try{if("singSwanSong"in localStorage){var e=localStorage.singSwanSong;delete localStorage.singSwanSong;var d=a.parseJson(e);d.Bundles&&d.UserId&&d.SessionId&&d.PageId?
(d.OrgId||(d.OrgId=this._identity.orgId()),0<d.Bundles.length&&(a.logIfDebug("Sending "+d.Bundles.length+" bundles as prior page swan song"),this.sendSwanSongBundles(d.OrgId,d.UserId,d.SessionId,d.PageId,d.PageStartTime,d.Bundles,d.LastBundleTime))):a.logIfDebug("Malformed swan song found. Ignoring it.")}}catch(b){a.logIfDebug("Error recovering swan-song: "+b)}};h.prototype.sendSwanSongBundles=function(e,d,b,c,f,g,h,l){var k=this;void 0===l&&(l=0);var p=null;a.isArray(g)&&(0!==g.length&&void 0!==
g[0])&&(1==g.length&&(p=this._ctx.wallTime()-(h||0)),this._transport.sendSwanSongBundle(e,d,b,c,g[0],f,p,function(l){a.logIfDebug("Sent "+g[0].Evts.length+" trailing events from last session as Seq "+g[0].Seq);a.windex.Array.prototype.shift.call(g);0<g.length?k.sendSwanSongBundles(e,d,b,c,f,g,h):a.logIfDebug("Done with prior page swan song")},function(p){a.isErrorFatal(p)?a.logIfDebug("Fatal error while sending events, giving up"):(a.logIfDebug("Failed to send events from last session, will retry while on this page"),
k._lastSwanSongRetryTimeout=new k._timeoutFactory(k.sendSwanSongBundles,a.exponentialBackoffMs(l,!0),k,e,d,b,c,f,g,h,l+1))}))};return h}();a.SwanSong=k})(m||(m={}));(function(a){var k=function(){function h(a){this._interval=a;this._handle=-1}h.prototype.start=function(e){-1==this._handle&&(this._handle=setInterval(function(){try{e()}catch(d){a.sendToBugsnag(d,"error")}},this._interval))};h.prototype.stop=function(){-1!=this._handle&&(clearInterval(this._handle),this._handle=-1)};return h}();a.RealTicker=
k;k=function(){function h(e,d,b){void 0===d&&(d=0);for(var c=[],f=3;f<arguments.length;f++)c[f-3]=arguments[f];this.delay=d;this.timer=-1;this.handler=function(){try{e.apply(void 0===b?window:b,c)}catch(f){a.sendToBugsnag(f,"error")}};this.timer=setTimeout(this.handler,d);this.args=c}h.prototype.cancel=function(){clearTimeout(this.timer);this.timer=-1};h.prototype.reset=function(a){void 0===a&&(a=this.delay);this.delay=a;clearTimeout(this.timer);this.timer=setTimeout(this.handler,this.delay)};return h}();
a.RealTimeout=k})(m||(m={}));(function(a){var k=function(){function h(e,d,b,c,f){void 0===b&&(b=function(){return[]});void 0===c&&(c=a.RealTicker);void 0===f&&(f=a.RealTimeout);var g=this;this._ctx=e;this._transport=d;this._gatherExternalEvents=b;this._tickerFactory=c;this._timeoutFactory=f;this._recordingDisabled=!1;this._lastWhen=-1;this._lastUserAction=0;this._hibernating=this._quiescent=!1;this._lastHeartbeat=0;this._heartbeatInterval=a.HeartbeatInitial;this._gotUnload=!1;this._eventQueue=[];
this._sampleCurvesTicker=new this._tickerFactory(a.CurveSamplingInterval);this._processMutationsTicker=new this._tickerFactory(a.MutationProcessingInterval);this._hibernationTimeout=new this._timeoutFactory(function(){g.hibernate()},a.PageInactivityTimeout,this);this._processor=new a.EventProcessor(e)}h.prototype.startPipeline=function(a,d,b){var c=this;void 0===d&&(d=0);void 0===b&&(b=[]);this._recordingDisabled||this._pipelineStarted||(this._pipelineStarted=!0,this._frameId=d,this._parentIds=b,
this._lastUserAction=this._ctx.now(),this.processEvents(),this._processMutationsTicker.start(function(){c.processEvents()}),this._sampleCurvesTicker.start(function(){c.processEvents(!0)}),this._transport.startPipeline(a))};h.prototype.enqueue=function(a,d){this.enqueueAt(this._ctx.now(),a,d)};h.prototype.enqueueAt=function(e,d,b){this._hibernating&&a.isUserActionEvent(d)?this._ctx.splitPage():this._recordingDisabled||(e<=this._lastWhen&&(e=this._lastWhen+1),this._lastWhen=e,this._eventQueue.push({When:e,
Kind:d,Args:b}),a.isUserActionEvent(d)&&(this._lastUserAction=e,this._hibernationTimeout.reset()))};h.prototype.hibernate=function(){this.shutdown();this._hibernating=!0};h.prototype.enqueueFirst=function(a,d){0<this._eventQueue.length?this._eventQueue.unshift({When:this._eventQueue[0].When,Kind:a,Args:d}):this.enqueue(a,d)};h.prototype.addUnload=function(){this._gotUnload||(this._gotUnload=!0,this.enqueue(a.EVENT_UNLOAD,[]),this._lastUserAction=this._ctx.now(),this.singSwanSong())};h.prototype.shutdown=
function(){this._flush();this.addUnload();this._flush();this._recordingDisabled=!0;this.stopPipeline();this._hibernationTimeout.cancel()};h.prototype._flush=function(){this.processEvents();this._transport.flush()};h.prototype.prequeue=function(a,d){this._recordingDisabled||this._eventQueue.unshift({When:0,Kind:a,Args:d})};h.prototype.appendToQueue=function(a){this._eventQueue=this._eventQueue.concat(a)};h.prototype.singSwanSong=function(){this._recordingDisabled||(this.processEvents(),this._transport.singSwanSong())};
h.prototype.rebaseIframe=function(a){for(var d=0,b=this._eventQueue.length;d<b;d++){var c=this._eventQueue[d],f=c.When+this._ctx.startTime()-a;0>f&&(f=0);c.When=f}};h.prototype.processEvents=function(e){if(this._pipelineStarted&&!this._hibernating&&(this._ctx.now()-this._lastUserAction>a.UserInactivityTimeout?this._quiescent||(this._quiescent=!0,this._heartbeatInterval=a.HeartbeatInitial,this._lastHeartbeat=this._ctx.now()):this._quiescent=!1,!this._quiescent||this.maybeSendHeartbeat())){var d=this._eventQueue;
this._eventQueue=[];d=this._processor.processQueue(d);e||(d=d.concat(this._gatherExternalEvents()));this.ensureFrameIds(d);0!=d.length&&this._transport.enqueueEvents(d)}};h.prototype.maybeSendHeartbeat=function(){var e=this._ctx.now();return e-this._lastHeartbeat>=this._heartbeatInterval?(this._lastHeartbeat=e,this._heartbeatInterval*=2,this._heartbeatInterval>a.HeartbeatMax&&(this._heartbeatInterval=a.HeartbeatMax),this.enqueue(a.EVENT_HEARTBEAT,[]),!0):!1};h.prototype.ensureFrameIds=function(a){if(this._frameId)for(var d=
this._parentIds,b=d&&0<d.length,c=0;c<a.length;++c){var f=a[c];f.FId||(f.FId=this._frameId);b&&!f.PIds&&(f.PIds=d)}};h.prototype.stopPipeline=function(){this._pipelineStarted&&(this._sampleCurvesTicker.stop(),this._processMutationsTicker.stop(),this._eventQueue=[],this._transport.stopPipeline())};return h}();a.EventQueue=k})(m||(m={}));(function(a){var k=function(){function h(e,d){this._queue=e;this._wnd=d;this._overflow=this._enabled=!1;this._total=0;this._listeners=new a.DomListeners;this._hooks=
[]}h.prototype.enable=function(){var e=this;this._listeners.add(this._wnd,"error",!0,function(a){return e.addError(a)});this._listeners.add(this._wnd,"unhandledrejection",!0,function(a){e.addLog("error",["Uncaught (in promise)",a.reason])});if(!this._enabled)if(this._enabled=!0,this._wnd.console)for(var d=function(c){if(!b._wnd.console.log||!b._wnd.console[c].apply)return"continue";var f=a.activateHook(b._wnd.console,c).before(function(a){return e.addLog(c,a.args)});b._hooks.push(f)},b=this,c=0,f=
["log","info","warn","error"];c<f.length;c++)d(f[c]);else this.addLog("log",["NOTE: Log messages cannot be captured on IE9"])};h.prototype.disable=function(){this._listeners.clear();if(this._enabled){this._enabled=!1;for(var a;a=this._hooks.pop();)a.disable()}};h.prototype.addLog=function(e,d){if(this.checkOverflow()){for(var b=[e],c=0;c<d.length;++c)b.push(a.stringify(d[c],1E3));this._queue.enqueue(a.EVENT_LOG,b)}};h.prototype.addError=function(e){if(this.checkOverflow()){var d=e.message,b=e.filename;
e=e.lineno;"object"==typeof d&&(d=a.stringify(d,1E3));"object"==typeof b&&(b=a.stringify(b,100));"object"==typeof e&&(e=-1);this._queue.enqueue(a.EVENT_ERROR,[d,b,e])}};h.prototype.checkOverflow=function(){if(this._overflow)return!1;if(this._total==a.MAX_LOGS_PER_PAGE)return this._queue.enqueue(a.EVENT_LOG,["warn",h.OVERFLOW_MSG]),this._overflow=!0,!1;this._total++;return!0};h.OVERFLOW_MSG='"[received more than '+a.MAX_LOGS_PER_PAGE+' messages; no longer recording console]"';return h}();a.ConsoleWatcher=
k})(m||(m={}));(function(a){function k(c,f){var d=Object.getOwnPropertyDescriptor(c.prototype,f);d&&Object.defineProperty(c.prototype,f,{set:function(c){var f=this,e=a.fsid(f);e&&(b&&b.values[e]!=c)&&setTimeout(function(){if(b)b.onChange(f,c)},0);return d.set.call(this,c)},get:function(){return d.get&&d.get.call(this)}})}function h(a){switch(a.type){case "checkbox":case "radio":return""+a.checked;default:return(a=a.value)||(a=""),""+a}}var e=function(){function c(a,c){this._onchange=a;this._checkElem=
c;this._fallback=!1;this._elems={};this.values={};b=this}c.prototype.hookEvents=function(){var a;(a=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"))&&a.set?(d||(k(HTMLInputElement,"value"),k(HTMLInputElement,"checked"),k(HTMLSelectElement,"value"),k(HTMLTextAreaElement,"value"),d=!0),a=!0):a=!1;a||(this._fallback=!0)};c.prototype.addInput=function(b){var c=a.fsid(b);this._elems[c]=b;this.values[c]=h(b);a:switch(b.type){case "checkbox":case "radio":c=b.checked!=b.hasAttribute("checked");
break a;default:var c=b.value||"",d=b.getAttribute("value")||"",c=c!=d}c&&this._onchange(b)};c.prototype.onChange=function(b,c){void 0===c&&(c=h(b));var d=a.fsid(b);(b=this._elems[d])&&c!=this.values[d]&&(this._onchange(b),this.values[d]=c)};c.prototype.tick=function(){for(var a in this._elems)if(!this._checkElem(this._elems[a]))delete this._elems[a],delete this.values[a];else if(this._fallback){var b=this._elems[a],c=h(b);c!=this.values[a]&&(this._onchange(b),this.values[a]=c)}};c.prototype.shutdown=
function(){b=null};c.prototype._usingFallback=function(){return this._fallback};c.prototype._trackingElem=function(a){return!!this._elems[a]};return c}();a.InputWatcher=e;var d=!1,b;a.valueOfInputishElem=h})(m||(m={}));(function(a){function k(a){return"_fswatch"in a}function h(a){return a._fswatch}function e(a,b){a._fswatch=b}function d(b,c){if(k(b.node))for(var f=b,d=b.parent;d;d=d.parent){d.watchedChildSet=d.watchedChildSet||{};if(f.watchedChildSet)for(var g in f.watchedChildSet)delete d.watchedChildSet[g];
d.watchedChildSet[f.id]=f;if(a.hasNKeys(d.watchedChildSet,2))f=d;else if(a.hasMoreThanNKeys(d.watchedChildSet,2))break}}function b(a){return a?p[a._fs]:null}function c(a){return a&&a._fs||0}function f(a,b,c){g(b);c=c||a.lastChild;b.parent=a;if(b.prev=c)d=[b,c.next],c.next=d[0],b.next=d[1];null==b.prev?a.child=b:b.prev.next=b;null==b.next?a.lastChild=b:b.next.prev=b;var d}function g(b){if(b.parent){if(a.hasMoreThanNKeys(b.watchedChildSet,0)||k(b.node))for(var c=a.firstKey(b.watchedChildSet)||b.id,
d=c?b.parent:null;d&&d.watchedChildSet&&d.watchedChildSet[c];){delete d.watchedChildSet[c];if(a.hasNKeys(d.watchedChildSet,1)){for(var c=d.id,f=a.firstValue(d.watchedChildSet),d=d.parent;d&&d.watchedChildSet&&d.watchedChildSet[c];)delete d.watchedChildSet[c],d.watchedChildSet[f.id]=f,d=d.parent;break}d=d.parent}b.parent.child==b&&(b.parent.child=b.next);b.parent.lastChild==b&&(b.parent.lastChild=b.prev);b.prev&&(b.prev.next=b.next);b.next&&(b.next.prev=b.prev);b.parent=b.prev=b.next=null;p[b.id]=
null;b.node._fs==b.id&&(b.node._fs=0);b.id=0;b.child&&n(b.child)}}function n(b){for(b=[b];0<b.length&&1E4>b.length;){var c=b.pop();c.node._fs==c.id&&(c.node._fs=0);c.id=0;c.next&&b.push(c.next);c.child&&b.push(c.child)}a.assert(1E4>b.length,"clearIds is fast")}function l(a,b){if(a.attributes&&0<a.attributes.length)for(var c=0;c<a.attributes.length;c++){var d=a.attributes[c];b(d.name.toLowerCase(),d.value)}}function x(a,b,c,d){if("class"==b&&0>c.indexOf("_fs_block_"))c+=" _fs_block_"+h(a);else if("type"==
b||"value"==b||"checked"==b||"src"==b||"data"==b||"alt"==b)return null;return c}a.isWatched=k;a.watchKind=h;a.setWatched=e;var p={};a.mirrorFor=b;a.fsid=c;a.fsidIfNotBlocked=function(a){return k(a)?0:c(a)};a.removeMirror=g;a.clearIds=n;var q=function(){function c(a){this._watcher=a;this._curId=1}c.prototype.curId=function(){return this._curId};c.prototype.tokenizeNode=function(a,c,d,f,g){var e=this._curId;try{var h=b(a),n=b(c);a=[];this.tokeNode(h,n,d,a,f,g);return a}catch(l){return this._curId=e,
[]}};c.prototype.tokeNode=function(b,c,g,e,h,n){if("SCRIPT"==g.nodeName||g.nodeType==a.Node_COMMENT_NODE)return null;var k={id:this._curId++,node:g};p[k.id]=k;g._fs=k.id;b&&f(b,k,c);if(g.nodeType==a.Node_DOCUMENT_TYPE_NODE)return e.push("<!DOCTYPE",":name",g.name,":publicId",g.publicId||"",":systemId",g.systemId||""),k;b=g.nodeName;"http://www.w3.org/2000/svg"==g.namespaceURI&&(b="svg:"+b);e.push("<"+b);try{var x=this.processWatchedElem(g,e);if(x&&(d(k,x),x!=a.WatchKindWatch))return k;h&&h(g);l(g,
function(a,b){e.push(":"+a);e.push(b);n&&n(g,a,b)});if(g.firstChild){e.push("[");var x=null,q;for(q=g.firstChild;q;q=q.nextSibling){var m=this.tokeNode(k,x,q,e,h,n);m&&(x=m)}e.push("]")}g.nodeType==a.Node_TEXT_NODE&&e.push(g.textContent||"")}catch(s){}return k};c.prototype.processWatchedElem=function(b,c){var d=this;if(b.nodeType==a.Node_ELEMENT_NODE&&this._watcher){var f=this._watcher.isWatched(b);if(f){e(b,f);if(f!=a.WatchKindWatch){var g,h=!1;l(b,function(a,f){var e=x(b,a,f,d._watcher);"class"==
a?g=!0:"style"==a&&(h=!0);null!=e&&(c.push(":"+a),c.push(e))});g||(c.push(":class"),c.push("_fs_block_"+f));h||(c.push(":style"),c.push(this._watcher.mungeWatchedStyle(b,"")))}return f}}return null};return c}();a.NodeEncoder=q;a.rewriteBlockedAttribute=x})(m||(m={}));(function(a){function k(){m=!1;var a=t;t=[];a.sort(function(a,b){return a.uid_-b.uid_});var b=!1;a.forEach(function(a){var c=a.takeRecords();h(a);c.length&&(a.callback_(c,a),b=!0)});b&&k()}function h(a){a.nodes_.forEach(function(b){(b=
l.get(b))&&b.forEach(function(b){b.observer===a&&b.removeTransientObservers()})})}function e(a,b){for(var c=a;c;c=c.parentNode){var d=l.get(c);if(d)for(var f=0;f<d.length;f++){var g=d[f],e=g.options;(c===a||e.subtree)&&(e=b(e))&&g.enqueue(e)}}}function d(a){this.callback_=a;this.nodes_=[];this.records_=[];this.uid_=++u}function b(a){if(y)return y;var b=w,c=new r(b.type,b.target);c.addedNodes=b.addedNodes.slice();c.removedNodes=b.removedNodes.slice();c.previousSibling=b.previousSibling;c.nextSibling=
b.nextSibling;c.attributeName=b.attributeName;c.attributeNamespace=b.attributeNamespace;c.oldValue=b.oldValue;y=c;y.oldValue=a;return y}function c(a,b,c){this.observer=a;this.target=b;this.options=c;this.transientObservedNodes=[]}var f=navigator.userAgent,f=-1<f.indexOf("MSIE ")||-1<f.indexOf("Trident/");a.MutationObserver=f?d:window.MutationObserver||window.WebKitMutationObserver||d;var g=Object.defineProperty,n=Date.now()%1E9,l=new (window.WeakMap||function(){var a=function(){this.name="__st"+(1E9*
Math.random()>>>0)+(n++ +"__")};a.prototype={set:function(a,b){var c=a[this.name];c&&c[0]===a?c[1]=b:g(a,this.name,{value:[a,b],writable:!0})},get:function(a){var b;return(b=a[this.name])&&b[0]===a?b[1]:void 0}};return a}()),x=window.setImmediate||window.msSetImmediate;if(!x){var p=[],q=String(Math.random());window.addEventListener("message",function(a){a.data===q&&(a=p,p=[],a.forEach(function(a){a()}))});x=function(a){for(var b=1;b<arguments.length;b++);p.push(a);window.postMessage(q,"*");return 0}}var m=
!1,t=[],u=0;d.prototype={observe:function(a,b){a=window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(a)||a;if(!b.childList&&!b.attributes&&!b.characterData||b.attributeOldValue&&!b.attributes||b.attributeFilter&&b.attributeFilter.length&&!b.attributes||b.characterDataOldValue&&!b.characterData)throw new SyntaxError;var d=l.get(a);d||l.set(a,d=[]);for(var f,g=0;g<d.length;g++)if(d[g].observer===this){f=d[g];f.removeListeners();f.options=b;break}f||(f=new c(this,a,b),d.push(f),this.nodes_.push(a));
f.addListeners()},disconnect:function(){this.nodes_.forEach(function(a){a=l.get(a);for(var b=0;b<a.length;b++){var c=a[b];if(c.observer===this){c.removeListeners();a.splice(b,1);break}}},this);this.records_=[]},takeRecords:function(){var a=this.records_;this.records_=[];return a}};var r=function(){return function(a,b){this.type=a;this.target=b;this.addedNodes=[];this.removedNodes=[];this.oldValue=this.attributeNamespace=this.attributeName=this.nextSibling=this.previousSibling=null}}(),w,y;c.prototype=
{enqueue:function(a){var b=this.observer.records_,c=b.length;if(0<b.length){var d=b[c-1];d=d===a?d:!y||d!==y&&d!==w?null:y;if(d){b[c-1]=d;return}}else t.push(this.observer),m||(m=!0,x(k));b[c]=a},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(a){var b=this.options;b.attributes&&a.addEventListener("DOMAttrModified",this,!0);b.characterData&&a.addEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.addEventListener("DOMNodeInserted",this,!0);(b.childList||
b.subtree)&&a.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(a){var b=this.options;b.attributes&&a.removeEventListener("DOMAttrModified",this,!0);b.characterData&&a.removeEventListener("DOMCharacterDataModified",this,!0);b.childList&&a.removeEventListener("DOMNodeInserted",this,!0);(b.childList||b.subtree)&&a.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(a){if(a!==this.target){this.addListeners_(a);
this.transientObservedNodes.push(a);var b=l.get(a);b||l.set(a,b=[]);b.push(this)}},removeTransientObservers:function(){var a=this.transientObservedNodes;this.transientObservedNodes=[];a.forEach(function(a){this.removeListeners_(a);a=l.get(a);for(var b=0;b<a.length;b++)if(a[b]===this){a.splice(b,1);break}},this)},handleEvent:function(a){switch(a.type){case "DOMAttrModified":var c=a.attrName,d=a.relatedNode.namespaceURI,f=a.target,g=w=new r("attributes",f);g.attributeName=c;g.attributeNamespace=d;var h=
a.attrChange===MutationEvent.ADDITION?null:a.prevValue;e(f,function(a){if(a.attributes&&(!a.attributeFilter||!a.attributeFilter.length||-1!==a.attributeFilter.indexOf(c)||-1!==a.attributeFilter.indexOf(d)))return a.attributeOldValue?b(h):g});break;case "DOMCharacterDataModified":f=a.target;g=w=new r("characterData",f);h=a.prevValue;e(f,function(a){if(a.characterData)return a.characterDataOldValue?b(h):g});break;case "DOMNodeRemoved":this.addTransientObserver(a.target);case "DOMNodeInserted":var f=
a.relatedNode,n=a.target,l;"DOMNodeInserted"===a.type?(a=[n],l=[]):(a=[],l=[n]);var k=n.previousSibling,n=n.nextSibling,g=w=new r("childList",f);g.addedNodes=a;g.removedNodes=l;g.previousSibling=k;g.nextSibling=n;e(f,function(a){if(a.childList)return g})}w=y=void 0}}})(m||(m={}));(function(a){var k=function(){function h(e,d,b,c){void 0===b&&(b=function(){});void 0===c&&(c=function(){});this._ctx=e;this._watcher=d;this._nodeVisitor=b;this._attrVisitor=c;this._sentDomSnapshot=!1;this._records=[];this._watchedDims=
{};this._wnd=e.getWindow();this._encoder=new a.NodeEncoder(d)}h.prototype.hookMutations=function(e){var d=this;void 0===e&&(e=this._wnd.document);this._root=e;this._sentDomSnapshot=!1;this._lz=new a.LZJGWEncoder;this._observer=new a.MutationObserver(function(a){d._records=d._records.concat(a)});this._observer.observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0,attributeOldValue:!0,characterDataOldValue:!0})};h.prototype.shutdown=function(){this._observer&&this._observer.disconnect();
var e=a.mirrorFor(this._root);e&&a.clearIds(e);this._records=[]};h.prototype.processMutations=function(){if(!this._root)return[];var e=this._ctx.now(),d=[];this._sentDomSnapshot||(this.genInsert(e,d,null,this._root,null),this.resizeRelatedWatchedElements(e,d,this._root),this._sentDomSnapshot=!0);if(0==this._records.length)return d;var b={},c={};this.processRecords(e,d,c,b);for(var f in c){var g=f.split(":");d.push({Kind:a.EVENT_MUT_ATTR,When:e,Args:[parseInt(g[0]),g[1],c[f]]})}for(f in b)d.push({Kind:a.EVENT_MUT_TEXT,
When:e,Args:[parseInt(f),b[f]]});this._records=[];return d};h.prototype.processRecords=function(e,d,b,c){for(var f={},g={},h=0;h<this._records.length;++h)try{var l=this._records[h],k=a.fsid(l.target);if(k)switch(f[k]=l.target,l.type){case "childList":if(0<l.removedNodes.length)for(var p=0;p<l.removedNodes.length;++p){var q=a.mirrorFor(l.removedNodes[p]);q&&q.id&&q.parent==a.mirrorFor(l.target)&&q.next==a.mirrorFor(l.nextSibling)&&this.genRemove(e,d,q)}k&&(g[k]=l.target);break;case "characterData":var m=
l.target.textContent;l.oldValue!=m&&(a.isWatched(l.target)||(c[k]=m));break;case "attributes":var t=l.attributeName||"",u=t.toLowerCase();if(l.target.hasAttribute(t)){var r=l.target.getAttribute(t);l.oldValue!=r&&(r=this.rewriteAttr(l.target,u,r||""),this._attrVisitor(l.target,u,r||""),null!==r&&(b[k+":"+u]=r))}else b[k+":"+u]=null}}catch(w){}for(var y in g)b=g[y],(c=a.mirrorFor(b))&&c.id&&this.diff(e,d,b,c.child,b.firstChild);for(y in f)b=f[y],this.resizeRelatedWatchedElements(e,d,b)};h.prototype.diff=
function(e,d,b,c,f){for(var g=[];c&&f;){var h=a.mirrorFor(f);a.fsid(f)?c.id==h.id?(c=c.next,f=f.nextSibling):(g.push({remove:c}),c=c.next):(g.push({insert:[b,f,c.node]}),f=f.nextSibling)}for(;c;c=c.next)g.push({remove:c});for(;f;f=f.nextSibling)g.push({insert:[b,f,null]});for(b=0;b<g.length;b++)c=g[b],c.insert?this.genInsert(e,d,c.insert[0],c.insert[1],c.insert[2]):c.remove&&this.genRemove(e,d,c.remove)};h.prototype.resizeRelatedWatchedElements=function(e,d,b){var c=a.mirrorFor(b);if(c)for(var c=
[c],f=0;c.length&&1E3>++f;){var g=c.pop();b=a.watchKind(g.node);if(null!=b)this.addPlaceholderResize(e,d,g.node,b);else if(g.watchedChildSet)for(var h in g.watchedChildSet)c.push(g.watchedChildSet[h])}else{for(h=b;h&&!a.fsid(h);)h=h.parentNode;h&&(b=a.watchKind(h),null!=b&&this.addPlaceholderResize(e,d,h,b))}};h.prototype.addPlaceholderResize=function(e,d,b,c){try{var f=b.getBoundingClientRect(),g=Math.floor(f.width),h=Math.floor(f.height),l=a.fsid(b),k=this._watchedDims[l];k&&k.w==g&&k.h==h||(c==
a.WatchKindWatch?(b=0!=g&&0!=h,(!!k&&0!=k.w&&0!=k.h)!=b&&d.push({When:e,Kind:a.EVENT_WATCHED_ELEM,Args:[l,b]})):d.push({When:e,Kind:a.EVENT_PLACEHOLDER_SIZE,Args:[l,g,h]}),this._watchedDims[l]={w:g,h:h})}catch(p){}};h.prototype.genInsert=function(e,d,b,c,f){var g=this;if(b&&a.isWatched(b))return null;var h=a.fsid(b)||-1,l=a.fsid(f)||-1;b=this._encoder.tokenizeNode(b,f,c,function(a){g._nodeVisitor(e,a)},function(a,b,c){g._attrVisitor(a,b,c)});0<b.length&&d.push({When:e,Kind:a.EVENT_MUT_INSERT,Args:[h,
l,this._lz.encode(b)]})};h.prototype.genRemove=function(e,d,b){var c=b.id;a.removeMirror(b);if(0<d.length&&(b=d[d.length-1],b.Kind==a.EVENT_MUT_REMOVE)){b.Args.push(c);return}d.push({When:e,Kind:a.EVENT_MUT_REMOVE,Args:[c]})};h.prototype.rewriteAttr=function(e,d,b){return a.isWatched(e)?a.rewriteBlockedAttribute(e,d,b,this._watcher):b};return h}();a.MutationWatcher=k})(m||(m={}));(function(a){function k(a){a=String(a);for(var b,c,d=0,f=B,g=[];a.charAt(d|0)||(f="=",d%1);g.push(f.charAt(63&b>>8-8*(d%
1)))){c=a.charCodeAt(d+=0.75);if(255<c)throw new C("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");b=b<<8|c}return g.join("")}var h=function(){for(var a=[],b=0;23>b;b++)a.push("url()blo:@impot}; \t\n\r'\"".charCodeAt(b));return a}(),e=h[0],d=h[1],b=h[2],c=h[3],f=h[4],g=h[5],b=h[6],n=h[7],l=h[8],x=h[9],p=h[10],q=h[11],m=h[12],n=h[13],t=h[15],u=h[16],r=h[18],w=h[19],y=h[20],D=h[21],H=h[22],z=[p,q,m,n,d,h[14],0,d,b,c,0,b,n,g,l,0],v={};v[h[17]]=!0;v[r]=!0;v[w]=
!0;v[y]=!0;v[D]=!0;v[H]=!0;for(var I in v)v.hasOwnProperty(I);var L=function(){function a(){this.reset()}a.prototype.getSubBlobs=function(){for(var a=[],b=0;b<this.subBlobs.length;b+=2)a.push({url:"blob:"+this.subBlobs[b],isCss:this.subBlobs[b+1]});return a};a.prototype.reset=function(){this.hash=[2166136261,2166136261,2166136261,2166136261];this.state=99;this.subBlobs=[];this.currentUrl="";this.urlIsCss=!1};a.prototype.write=function(a){for(var b=0;b<a.length;b++){var c=b%4;this.hash[c]^=a[b];this.hash[c]+=
(this.hash[c]<<1)+(this.hash[c]<<4)+(this.hash[c]<<7)+(this.hash[c]<<8)+(this.hash[c]<<24)}};a.prototype.writeAscii=function(a){for(var b=0;b<a.length;b++){var c=b%4;this.hash[c]^=a.charCodeAt(b);this.hash[c]+=(this.hash[c]<<1)+(this.hash[c]<<4)+(this.hash[c]<<7)+(this.hash[c]<<8)+(this.hash[c]<<24)}};a.prototype.writeCss=function(a){for(var b=0;b<a.length;b++){var c=a[b];switch(this.state){case 99:e==c?this.state=7:x==c&&(this.state=0);break;case 10:v[c]||(g==c?this.state=11:(this.urlIsCss=!1,this.state=
99));break;case 6:this.urlIsCss=!0;v[c]||(e==c?this.state=7:g==c?this.state=11:(this.urlIsCss=!1,this.state=99));break;case 15:if(v[c]||f==c||t==c||u==c)this.subBlobs.push(this.currentUrl,this.urlIsCss),this.urlIsCss=!1,this.currentUrl="",this.state=99;else{this.currentUrl+=String.fromCharCode(c);continue}break;default:c==z[this.state]?this.state++:(this.urlIsCss=!1,this.state=99)}var d=b%4;this.hash[d]^=c;this.hash[d]+=(this.hash[d]<<1)+(this.hash[d]<<4)+(this.hash[d]<<7)+(this.hash[d]<<8)+(this.hash[d]<<
24)}};a.prototype.sum=function(){var a=("00000000"+(this.hash[0]>>>0).toString(16)).slice(-8)+("00000000"+(this.hash[1]>>>0).toString(16)).slice(-8)+("00000000"+(this.hash[2]>>>0).toString(16)).slice(-8)+("00000000"+(this.hash[3]>>>0).toString(16)).slice(-8);return P(String.fromCharCode.apply(null,a.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))};return a}();a._FSNV=L;a.hashNonBlocking=function(b,c,d,f){void 0===f&&(f=new L);return N(this,void 0,void 0,function(){var g,
e,h,n,l;return O(this,function(k){switch(k.label){case 0:g=d?f.writeCss:f.write,e=b.now(),h=0,k.label=1;case 1:return h<c.byteLength?50<b.now()-e?[4,a.wait(75)]:[3,3]:[3,5];case 2:k.sent(),e=b.now(),k.label=3;case 3:n=Math.min(5096,c.byteLength-h),l=new Uint8Array(c,h,n),g.call(f,l),k.label=4;case 4:return h+=5096,[3,1];case 5:return[2,{hash:f.sum(),hasher:f}]}})})};var B="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",C=function(a){function b(){return null!==a&&a.apply(this,arguments)||
this}M(b,a);return b}(Error),P=window.btoa||k;a._jsbtoa=k})(m||(m={}));(function(a){function k(d){var b,c=new a.Promise(function(a){return b=a});if(!a.assert(a.prefix(d,"blob:"),'Blob url must start with "blob:"'))return b(null),c;var f=new XMLHttpRequest;if("string"!=typeof f.responseType)return b(null),c;f.open("GET",d);f.responseType="blob";f.onerror=function(){b(null)};f.onload=function(){if(200!=f.status)a.logIfDebug("Error loading blob resource "+d),b(null);else{var c=f.response;if(c.size>h)a.logIfDebug("Size of blob resource "+
d+" exceeds limit of "+h),b(null);else{var e=new FileReader;e.readAsArrayBuffer(c);e.onload=function(){b({data:e.result,contentType:c.type,blob:c})}}}};f.send();return c}var h=2097152,e=function(){function d(b,c,d,g,e){void 0===d&&(d=new a.XHRPoster);void 0===g&&(g=FormData);void 0===e&&(e=a.RealTimeout);this.ctx=b;this.queue=c;this.poster=d;this.FormDataCtr=g;this.Timeout=e;this.started={};this.byUrl={};this.byHash={};this.batchReady=!1;this.existsBatch=[];this.host=a.gceHost(this.ctx.getHost())}
d.prototype.init=function(){this.main().catch(function(b){a.sendToBugsnag(b,"error")})};d.prototype.main=function(){return N(this,void 0,void 0,function(){var b,c,d,g,e,h,k,p,m,s,t,u,r,w,y,D,H,z;return O(this,function(v){switch(v.label){case 0:return[4,this.getBatch()];case 1:b=v.sent();c=a.stringify(a.map(b,function(a){return a.hash}));d={};for(g=0;g<b.length;g++)e=b[g],d[e.hash]=e;h=this.ctx.getOrgId();k="/rec/newResources?OrgId="+h;v.label=2;case 2:return v.trys.push([2,4,,5]),[4,this.poster.postPromise(this.ctx.getProtocol(),
this.host,k,c)];case 3:return p=v.sent(),[3,5];case 4:return m=v.sent(),a.logIfDebug("/rec/newResources failed with status "+m),[3,0];case 5:try{s=JSON.parse(p)}catch(I){return a.sendToBugsnag("Error parsing /rec/newResources response","error"),[3,0]}t=0;u=s;v.label=6;case 6:if(!(t<u.length))return[3,11];r=u[t];w=d[r];y=w.url;D=w.blob;H=w.childHashes;if(null==D)return a.sendToBugsnag("Tried to re-upload a resource","warning"),[3,10];z=new this.FormDataCtr;z.append("orgId",h);z.append("baseUrl",y);
z.append("fsnvHash",r);z.append("childHashes",a.stringify(H));z.append("contents",D,"blob");w.blob=null;v.label=7;case 7:return v.trys.push([7,9,,10]),[4,this.poster.postPromise(this.ctx.getProtocol(),this.host,"/rec/uploadResource",z)];case 8:return v.sent(),[3,10];case 9:return v.sent(),a.logIfDebug("Server error uploading resource"),[3,10];case 10:return t++,[3,6];case 11:return[3,0];case 12:return[2]}})})};d.prototype.getBatch=function(){var b=this,c,d=new a.Promise(function(a){return c=a}),g=
function(){b.popBatch=null;b.batchReady=!1;var a=b.existsBatch;b.existsBatch=[];c(a)};this.batchReady?g():this.popBatch=g;return d};d.prototype.uploadBlob=function(b,c){void 0===c&&(c=!1);return N(this,void 0,void 0,function(){var d=this,g,e,h,k,p;return O(this,function(m){switch(m.label){case 0:if(0!=b.lastIndexOf("blob:",0)||this.started[b])return[2];this.started[b]=!0;return[4,this.hashResourceTree(b,c)];case 1:g=m.sent();if(!g)return[2];e=0==this.existsBatch.length;this.existsBatch.push(g);h=
0;for(k=a.values(g.childHashes);h<k.length;h++)p=k[h],this.existsBatch.push(this.byHash[p]);e&&new this.Timeout(function(){d.batchReady=!0;d.popBatch&&d.popBatch()});return[2]}})})};d.prototype.hashResourceTree=function(b,c){return N(this,void 0,void 0,function(){var d,g,e,h,m,p,q,s,t,u,r;return O(this,function(w){switch(w.label){case 0:return this.byUrl[b]?[2,this.byUrl[b]]:[4,k(b)];case 1:return(d=w.sent())?[4,a.hashNonBlocking(this.ctx,d.data,c)]:[2,null];case 2:g=w.sent().hasher,e={},h=g.getSubBlobs(),
m=0,p=h,w.label=3;case 3:if(!(m<p.length))return[3,6];q=p[m];s=q.url;t=q.isCss;return[4,this.hashResourceTree(s,t)];case 4:u=w.sent();if(!u)return[3,5];e[s]=u.hash;g.writeAscii(u.hash);w.label=5;case 5:return m++,[3,3];case 6:return r={url:b,hash:g.sum(),blob:d.blob,contentType:d.contentType,childHashes:e},this.byUrl[b]=r,this.byHash[r.hash]=r,this.queue.enqueue(a.EVENT_SYS_RESOURCEHASH,["url",b,r.hash]),[2,r]}})})};return d}();a.ResourceUploader=e})(m||(m={}));(function(a){var k="navigationStart unloadEventStart unloadEventEnd redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd domLoading domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd".split(" "),
h="name startTime duration initiatorType redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd unloadEventStart unloadEventEnd domInteractive domContentLoadedEventStart domContentLoadedEventEnd domComplete loadEventStart loadEventEnd type redirectCount decodedBodySize encodedBodySize transferSize".split(" "),e="name startTime duration initiatorType redirectStart redirectEnd fetchStart domainLookupStart domainLookupEnd connectStart connectEnd secureConnectionStart requestStart responseStart responseEnd decodedBodySize encodedBodySize transferSize".split(" "),
d=["name","startTime","duration"],b=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"],c=function(){function c(b){this._queue=b;this._memorySupported=this._getEntriesSupported=this._timingSupported=this._perfSupported=!1;this._lastUsedJSHeapSize=this._lastPerfCount=0;window.performance&&(this._perfSupported=!0,"timing"in window.performance&&(this._timingSupported=!0),"getEntries"in window.performance&&(this._getEntriesSupported=!0),"memory"in window.performance&&(this._memorySupported=!0),this._queue.enqueue(a.EVENT_REC_FEAT_SUPPORTED,
[a.RecFeaturePerformance,this._timingSupported,a.RecFeaturePerformanceEntries,this._getEntriesSupported,a.RecFeaturePerformanceMemory,this._memorySupported]),this.checkMemory())}c.prototype.onLoad=function(){this._timingSupported&&this.recordTiming(performance.timing)};c.prototype.tick=function(){this.checkForNewEntries();this.checkMemory()};c.prototype.checkMemory=function(){if(this._memorySupported){var c=performance.memory,d=c.usedJSHeapSize-this._lastUsedJSHeapSize;if(0==this._lastUsedJSHeapSize||
0.2<Math.abs(d/this._lastUsedJSHeapSize))this.addPerfEvent(a.PerfEntryMemory,c,b),this._lastUsedJSHeapSize=c.usedJSHeapSize}};c.prototype.checkForNewEntries=function(){if(this._perfSupported&&this._getEntriesSupported){var a=performance.getEntries();if(a.length>this._lastPerfCount){for(;this._lastPerfCount<a.length;this._lastPerfCount++){var b=a[this._lastPerfCount];switch(b.entryType){case "navigation":this.recordNavigation(b);break;case "resource":this.recordResource(b);break;case "paint":this.recordPaint(b);
break;case "measure":this.recordMeasure(b);break;case "mark":this.recordMark(b)}}this._lastPerfCount=a.length}}};c.prototype.recordTiming=function(b){this.addPerfEvent(a.PerfEntryTiming,b,k)};c.prototype.recordNavigation=function(b){this.addPerfEvent(a.PerfEntryNavigation,b,h)};c.prototype.recordResource=function(b){this.addPerfEvent(a.PerfEntryResource,b,e)};c.prototype.recordPaint=function(b){this.addPerfEvent(a.PerfEntryPaint,b,d)};c.prototype.recordMark=function(b){this.addPerfEvent(a.PerfEntryMark,
b,d)};c.prototype.recordMeasure=function(b){this.addPerfEvent(a.PerfEntryMeasure,b,d)};c.prototype.addPerfEvent=function(b,c,d){b=[b];for(var f=0;f<d.length;f++){var e=c[d[f]];void 0!==e&&(e=-1);b.push(e)}this._queue.enqueue(a.EVENT_PERF_ENTRY,b)};return c}();a.PerfWatcher=c})(m||(m={}));(function(a){function k(a,b){if(!a.firstChild)return[a,b];a=a.firstChild;for(var c=0;c<b-1&&a.nextSibling;c++)a=a.nextSibling;return[a,0]}function h(d,b,c){var f=a.tagName(d);if(("img"==f||"embed"==f)&&"src"==b||
("use"==f||"image"==f)&&"href"==b||"object"==f&&"data"==b)return[[c],!1];var g;return"link"==f&&"href"==b&&(g=d.getAttribute("rel"))&&-1<g.indexOf("stylesheet")?[[c],!0]:"srcset"!=b||"img"!=f&&"source"!=f?[[],!1]:null!=c.match(/^\s*$/)?[[],!1]:[a.map(c.split(","),function(b){return a.trim(b).split(/\s+/)[0]}),!1]}var e=function(){function d(b,c,d,g,e){void 0===e&&(e=new a.ResourceUploader(b,c));var l=this;this._ctx=b;this._queue=c;this._watcher=d;this._onFrameCreated=g;this._resourceUploader=e;this._clientHeight=
this._clientWidth=this._curWindowScrollY=this._curWindowScrollX=-1;this._curInnerWidth=0;this._curSelection=[];this._scrollTimeouts={};this._uploadResources=this._quirks=!1;this._listeners=new a.DomListeners;this._initialized=!1;this._wnd=b.getWindow();this._doc=this._wnd.document;this._loc=this._wnd.location;this._hst=this._wnd.history;this._quirks="BackCompat"==this._doc.compatMode;this._currentUrl=this._loc.href;this._inputWatcher=new a.InputWatcher(function(a){l.addChangeElem(a)},function(b){return!!a.fsid(b)});
this._perfWatcher=new a.PerfWatcher(c);this._mutWatcher=new a.MutationWatcher(b,d,function(a,b){l.visitNode(a,b)},function(a,b,c){if(l._uploadResources)for(c=h(a,b,c),a=c[1],b=0,c=c[0];b<c.length;b++){var d=c[b];0==d.lastIndexOf("blob:",0)&&l._resourceUploader.uploadBlob(d,a)}})}d.prototype.watchEvents=function(){var b=this;this._mutWatcher.hookMutations();this._inputWatcher.hookEvents();this._listeners.add(this._wnd,"mousemove",!0,function(a){b.addMouseMove(a)});this._listeners.add(this._wnd,"mousedown",
!0,function(a){b.addMouseDown(a)});this._listeners.add(this._wnd,"mouseup",!0,function(a){b.addMouseUp(a)});this._listeners.add(this._wnd,"keydown",!0,function(a){b.addKeyDown(a)});this._listeners.add(this._wnd,"keyup",!0,function(a){b.addKeyUp(a)});this._listeners.add(this._wnd,"click",!0,function(a){b.addClick(a)});this._listeners.add(this._wnd,"dblclick",!0,function(a){b.addDblClick(a)});this._listeners.add(this._wnd,"focus",!0,function(a){b.addFocus(a)});this._listeners.add(this._wnd,"blur",!0,
function(a){b.addBlur(a)});this._listeners.add(this._wnd,"change",!0,function(a){b.addChange(a)});this._listeners.add(this._wnd,"touchstart",!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHSTART);b.addWindowScroll()});this._listeners.add(this._wnd,"touchend",!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHEND);b.addWindowScroll()});this._listeners.add(this._wnd,"touchmove",!0,function(c){b.addTouchEvent(c,a.EVENT_TOUCHMOVE);b.addWindowScroll()});this._listeners.add(this._wnd,"touchcancel",!0,function(c){b.addTouchEvent(c,
a.EVENT_TOUCHCANCEL)});this._listeners.add(this._wnd,"play",!0,function(c){b.addPlayPauseEvent(c,a.EVENT_PLAY)});this._listeners.add(this._wnd,"pause",!0,function(c){b.addPlayPauseEvent(c,a.EVENT_PAUSE)});this._listeners.add(this._wnd,"scroll",!1,function(a){b.addWindowScroll()});this._listeners.add(this._wnd,"resize",!1,function(a){b.addResize()});this._listeners.add(this._wnd,"submit",!1,function(a){b.addFormSubmit(a)});this._listeners.add(this._wnd,"focus",!1,function(a){b.addWindowFocus(a)});
this._listeners.add(this._wnd,"blur",!1,function(a){b.addWindowBlur(a)});this._listeners.add(this._wnd,"popstate",!1,function(){b.addNavigate()});this._listeners.add(this._wnd,"selectstart",!0,function(a){b.addSelection()});this._listeners.add(this._doc,"selectionchange",!0,function(a){b.addSelection()});this._hst.pushState&&(this._pushHook=a.activateHook(this._hst,"pushState").afterSync(function(){return b.addNavigate()}),this._replaceHook=a.activateHook(this._hst,"replaceState").afterSync(function(){return b.addNavigate()}));
this._initialized=!0};d.prototype.initResourceUploading=function(){this._resourceUploader.init();this._uploadResources=!0};d.prototype.onDomLoad=function(){this.addDomLoaded();this.addResize()};d.prototype.onLoad=function(){this._perfWatcher.onLoad();this.addLoad();this.addResize()};d.prototype.bundleEvents=function(){this._inputWatcher.tick();this._perfWatcher.tick();this.addWindowInnerWidth();return this._mutWatcher.processMutations()};d.prototype.shutdown=function(){this._initialized&&(this._initialized=
!1,this._listeners.clear(),this._pushHook&&this._pushHook.disable(),this._replaceHook&&this._replaceHook.disable(),this._inputWatcher.shutdown(),this._mutWatcher.shutdown())};d.prototype.docElem=function(){return this._doc.documentElement};d.prototype.visitNode=function(b,c){var d=this;switch(c.nodeName){case "HTML":this._docElScrollListener&&this._listeners.remove(this._docElScrollListener);this._docElScrollListener=this._listeners.add(c,"scroll",!0,function(a){d.addScroll(a)});break;case "BODY":this.addResize();
this.addWindowScroll();a.initWindex(this._wnd);setTimeout(function(){return d.addSelection()});break;case "INPUT":case "TEXTAREA":case "SELECT":this._inputWatcher.addInput(c);break;case "FRAME":case "IFRAME":this._onFrameCreated(c);break;case "VIDEO":case "AUDIO":c.paused||this.addPlayPauseEventById(a.fsid(c),a.EVENT_PLAY)}};d.prototype.addMouseMove=function(b){b=a.fsid(b.target)?[b.clientX,b.clientY,a.fsid(b.target)]:[b.clientX,b.clientY];this._queue.enqueue(a.EVENT_MOUSEMOVE,b)};d.prototype.addMouseDown=
function(b){this._queue.enqueue(a.EVENT_MOUSEDOWN,[b.clientX,b.clientY])};d.prototype.addMouseUp=function(b){this._queue.enqueue(a.EVENT_MOUSEUP,[b.clientX,b.clientY])};d.prototype.addTouchEvent=function(a,c){if(void 0!==a.changedTouches)for(var d=0;d<a.changedTouches.length;++d){var g=a.changedTouches[d];isNaN(parseInt(g.identifier))&&(g.identifier=0);this._queue.enqueue(c,[g.identifier,g.clientX,g.clientY])}};d.prototype.addPlayPauseEvent=function(b,c){var d=a.fsid(b.target);d&&this.addPlayPauseEventById(d,
c)};d.prototype.addPlayPauseEventById=function(a,c){this._queue.enqueue(c,[a])};d.prototype.addWindowFocus=function(b){this._queue.enqueue(a.EVENT_WINDOW_FOCUS,[])};d.prototype.addWindowBlur=function(b){this._queue.enqueue(a.EVENT_WINDOW_BLUR,[])};d.prototype.maybeAddValueChange=function(){var a=this._doc.activeElement;if(a)this._inputWatcher.onChange(a)};d.prototype.addKeyDown=function(b){var c=this._doc.activeElement;if(!c||a.fsidIfNotBlocked(c))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYDOWN,
[b.keyCode])};d.prototype.addKeyUp=function(b){var c=this._doc.activeElement;if(!c||a.fsidIfNotBlocked(c))this.maybeAddValueChange(),this._queue.enqueue(a.EVENT_KEYUP,[b.keyCode])};d.prototype.addWindowInnerWidth=function(){var b=this._wnd.innerWidth;b!=this._curInnerWidth&&(this._queue.enqueue(a.EVENT_INNERWIDTH,[b]),this._curInnerWidth=b)};d.prototype.doWorkInScrollTimeout=function(b,c){var d=this;b in this._scrollTimeouts||(this._scrollTimeouts[b]=c,setTimeout(function(){if(b in d._scrollTimeouts){var a=
d._scrollTimeouts[b];delete d._scrollTimeouts[b];a()}},a.ScrollSampleInterval))};d.prototype._fireScrollTimeouts=function(){for(var a in this._scrollTimeouts)this._scrollTimeouts[a](),delete this._scrollTimeouts[a];this._scrollTimeouts=[]};d.prototype.addWindowScroll=function(){var b=this,c=a.fsid(this._doc.body);c&&this.doWorkInScrollTimeout(c,function(){var d,g;"pageXOffset"in b._wnd?(d=b._wnd.pageXOffset,g=b._wnd.pageYOffset):(d=b._doc.body.scrollLeft,g=b._doc.body.scrollTop);if(d!=b._curWindowScrollX||
g!=b._curWindowScrollY)b._queue.enqueue(a.EVENT_SCROLL,[c,d,g]),b._curWindowScrollX=d,b._curWindowScrollY=g;b.addWindowInnerWidth()})};d.prototype.addScroll=function(b){var c=this,d=b.target,g=a.fsid(d);g&&this.doWorkInScrollTimeout(g,function(){c._queue.enqueue(a.EVENT_SCROLL,[g,d.scrollLeft,d.scrollTop])})};d.prototype.addResize=function(){if(this._doc.body){var b,c;this._quirks?(b=this._doc.body.clientWidth,c=this._doc.body.clientHeight):(b=this.docElem().clientWidth,c=this.docElem().clientHeight);
if(b!=this._clientWidth||c!=this._clientHeight)this._clientWidth=b,this._clientHeight=c,b=Math.max(this._wnd.innerWidth||-1,this._clientWidth),this.isMediaValue("width",b)||(b=this.findMediaValue("width",b,b+128)||b),c=Math.max(this._wnd.innerHeight,this._clientHeight),this.isMediaValue("height",c)||(c=this.findMediaValue("height",c,c+128)||c),b==this._clientWidth&&c==this._clientHeight?this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,this._clientHeight]):this._queue.enqueue(a.EVENT_RESIZE,[this._clientWidth,
this._clientHeight,b,c])}};d.prototype.isMediaValue=function(a,c){if(!this._wnd.matchMedia)return!0;var d=this._wnd.matchMedia("(min-"+a+": "+c+"px)");if(!d)return!0;var g=this._wnd.matchMedia("(max-"+a+": "+c+"px)");return g?d.matches&&g.matches:!0};d.prototype.findMediaValue=function(a,c,d){if(!this._wnd.matchMedia)return 0;for(;c<d;){var g=Math.floor((c+d)/2);if(this._wnd.matchMedia("(min-"+a+": "+g+"px)").matches){if(this._wnd.matchMedia("(max-"+a+": "+g+"px)").matches)return g;c=g+1}else d=g-
1}return 0};d.prototype.addDomLoaded=function(){this._queue.enqueue(a.EVENT_DOMLOADED,[])};d.prototype.addLoad=function(){this._queue.enqueue(a.EVENT_LOAD,[])};d.prototype.addNavigate=function(){var b=this._loc.href;this._currentUrl!=b&&(this._currentUrl=b,this._queue.enqueue(a.EVENT_NAVIGATE,[this._loc.href,this._doc.title]))};d.prototype.addClick=function(b){var c=b.target,d=a.fsid(c);if(d){var g=0,e=0,h=0,k=0;c&&c.getBoundingClientRect&&(c=c.getBoundingClientRect(),g=c.left,e=c.top,h=c.width,k=
c.height);this._queue.enqueue(a.EVENT_CLICK,[d,b.clientX,b.clientY,g,e,h,k])}};d.prototype.addDblClick=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_DBL_CLICK,[b])};d.prototype.addFormSubmit=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_FORM_SUBMIT,[b])};d.prototype.addFocus=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_FOCUS,[b])};d.prototype.addBlur=function(b){(b=a.fsid(b.target))&&this._queue.enqueue(a.EVENT_BLUR,[b])};d.prototype.addChange=function(a){this._inputWatcher.onChange(a.target)};
d.prototype.addChangeElem=function(b){var c=a.fsidIfNotBlocked(b);c&&this._queue.enqueue(a.EVENT_VALUECHANGE,[c,a.valueOfInputishElem(b)])};d.prototype.addSelection=function(){for(var b=this.selectionArgs(),c=!1,d=0;4>d;d++)if(this._curSelection[d]!==b[d]){c=!0;break}c&&(this._curSelection=b,this._queue.enqueue(a.EVENT_SELECT,b))};d.prototype.selectionArgs=function(){if(!this._wnd.getSelection)return[];var b=this._wnd.getSelection();if(!b||"None"==b.type)return[];if("Caret"==b.type){var c=a.fsid(b.anchorNode);
return c?[c,b.anchorOffset]:[]}if(!b.anchorNode||!b.focusNode)return[];var d=k(b.anchorNode,b.anchorOffset),c=d[0],d=d[1],b=k(b.focusNode,b.focusOffset),g=b[0],e=b[1],g=(b=Boolean(c.compareDocumentPosition(g)&Node.DOCUMENT_POSITION_FOLLOWING))?[c,g]:[g,c],c=g[0],g=g[1],e=b?[d,e]:[e,d],d=e[0],e=e[1];for(a.fsid(c)||(d=0);c&&!a.fsid(c)&&c!=g;)c=c.nextSibling||c.parentNode;for(a.fsid(g)||(e=0);g&&!a.fsid(g)&&g!=c;)g=g.previousSibling||g.parentNode;if(c==g&&d==e)return[];var h=a.fsid(c),m=a.fsid(g);return c&&
g&&h&&m?[h,d,m,e,b]:[]};return d}();a.EventWatcher=e;a.getResourceUrls=h})(m||(m={}));(function(a){function k(b){try{var c=a.parseJson(b);if("__fs"in c)return c.__fs}catch(d){}return[]}function h(a){var b=a.src;return!a.hasAttribute("src")||"about:blank"==b||0==b.indexOf("javascript:")||0==b.indexOf(e)}a.FS_REQUEST_FRAME_ID="RequestFrameId";a.FS_SET_FRAME_ID_CMD="SetFrameId";a.FS_IFRAME_EVENTS="EvtBundle";a.FS_SHUTDOWN_FRAME="ShutdownFrame";a.FS_RESTART_FRAME="RestartFrame";var e=location.protocol+
"//"+location.host;a.defaultInjector=function(b,c,e,h){a.logIfDebug("Injecting into Frame ["+b.src+"]");try{if(b.id==b.name&&d.test(b.id))a.logIfDebug("Blacklisted iframe: "+b.src);else if(b.src&&("about:blank"!=b.src&&0>b.src.indexOf("javascript:"))&&b.src!=b.contentWindow.location.href)a.logIfDebug("Frame not yet loaded: "+b.src);else if(b.contentWindow[a.Namespace(b.contentWindow)])a.logIfDebug("FS already defined in Frame contentWindow: "+b.src+". Ignoring.");else{var k=b.contentWindow,p=b.contentDocument;
k._fs_org=c;k._fs_host=e;k._fs_debug=a.isDebug();k._fs_run_in_iframe=!0;var m=p.createElement("script");m.async=!0;m.src=h+"//"+e+"/s/fs.js";"testdrive"==c&&(m.src+="?allowMoo=true");p.head.appendChild(m)}}catch(s){a.logIfDebug("iFrame no injecty. Probably not same origin.")}};var d=/^fb\d{18}$/,b;(function(a){a[a.NoInfoYet=1]="NoInfoYet";a[a.Enabled=2]="Enabled";a[a.Disabled=3]="Disabled"})(b=a.GetCurrentSessionEnabledState||(a.GetCurrentSessionEnabledState={}));var c=function(){function c(d,f,e,
h){var k=this;this._ctx=d;this._injector=h;this._iFrames=[];this._pendingChildFrameIdInits=[];this._listeners=new a.DomListeners;this._getCurrentSessionEnabled=b.NoInfoYet;this._resourceUploadingEnabled=!1;this._watcher=new a.Watcher;this._transport=e(d,function(){k.shutdown()});this._queue=new a.EventQueue(d,this._transport,function(){return k._eventWatcher.bundleEvents()},f);this._eventWatcher=new a.EventWatcher(d,this._queue,this._watcher,function(a){k.onFrameCreated(a)});this._consoleWatcher=
new a.ConsoleWatcher(this._queue,d.getWindow());this._protocol=d.getProtocol();this._host=d.getHost();this._orgId=d.getOrgId();this._identity=d.getIdentity();this._wnd=d.getWindow()}c.prototype.start=function(b,c){var d=this;this._onFullyStarted=c;this._watcher.addPredicateRule({Selector:function(b){var c=a.tagName(b);if("object"==c)c="data";else if("embed"==c)c="src";else return!1;return!(I.IMAGE_FILENAME.test(b[c])&&(!b.type||0==b.type.lastIndexOf("image",0)))},Kind:a.WatchKindNYI});this._watcher.addRule({Selector:"canvas",
Kind:a.WatchKindNYI});this._watcher.addRule({Selector:"noscript",Kind:a.WatchKindBlocked});this._watcher.addRule({Selector:".fs-hide",Kind:a.WatchKindHide});this._consoleWatcher.enable();"onpagehide"in this._wnd?this._listeners.add(this._wnd,"pagehide",!1,function(a){d._queue.addUnload()}):this._listeners.add(this._wnd,"unload",!1,function(a){d._queue.addUnload()});this._listeners.add(this._wnd,"message",!1,function(a){"string"==typeof a.data&&d.postMessageReceived(a.source,k(a.data))})};c.prototype.getCurrentSessionEnabled=
function(){return this._getCurrentSessionEnabled};c.prototype.queue=function(){return this._queue};c.prototype.eventWatcher=function(){return this._eventWatcher};c.prototype.console=function(){return this._consoleWatcher};c.prototype.onDomLoad=function(){this._eventWatcher.onDomLoad()};c.prototype.onLoad=function(){this._eventWatcher.onLoad()};c.prototype.shutdown=function(){this._queue.shutdown();this._eventWatcher.shutdown();this._consoleWatcher.disable();this._listeners.clear();this.tellAllFramesTo([a.FS_SHUTDOWN_FRAME])};
c.prototype.tellAllFramesTo=function(b){for(var c=0;c<this._iFrames.length;c++){var d=this._iFrames[c].contentWindow;d&&d.postMessage&&d.postMessage(a.stringify({__fs:b}),"*")}};c.prototype.fullyStarted=function(){this._onFullyStarted()};c.prototype.enableResourceUploading=function(){this._resourceUploadingEnabled=!0;this._eventWatcher.initResourceUploading()};c.prototype.flushPendingChildFrameInits=function(){if(0<this._pendingChildFrameIdInits.length){for(var a=0;a<this._pendingChildFrameIdInits.length;a++)this._pendingChildFrameIdInits[a]();
this._pendingChildFrameIdInits=[]}};c.prototype.onFrameCreated=function(b){var c=this,d=a.fsid(b);if(d){this._iFrames.push(b);var f=h(b),e=!f||b.contentWindow[a.Namespace(b.contentWindow)];f&&!e||!b.contentWindow.postMessage?f?(a.logIfDebug("Attempting to setup Frame ["+b.src+"]"),this._injector(b,this._orgId,this._host,this._protocol),b.addEventListener("load",function(d){a.logIfDebug("onload for frame ["+b.src+"]");c._injector(b,c._orgId,c._host,c._protocol)})):a.logIfDebug("Frame Doesn't need injecting. Probably cross domain ["+
b.src+"]"):(a.logIfDebug("Eagerly sending FrameId"+d+" to Frame ["+b.src+"]"),this.sendFrameIdToInnerFrame(b.contentWindow,d))}else a.logIfDebug("fsid missing or invalid for iFrame."+b.src)};c.prototype.postMessageReceived=function(b,c){switch(c[0]){case a.FS_IFRAME_EVENTS:var d=c[1];0<d.length&&this._transport.enqueueEvents(d);break;case a.FS_REQUEST_FRAME_ID:d=this.iFrameWndToFsId(b),b&&d?(a.logIfDebug("Responding to FID request for frame "+d),this.sendFrameIdToInnerFrame(b,d)):a.logIfDebug("No FrameId found. Hoping to send one later.")}};
c.prototype.sendFrameIdToInnerFrame=function(b,c){var d=this,f=function(){var f=[];0!=d._frameId&&(f=d._parentIds?d._parentIds.concat(d._frameId):[d._frameId]);f=[a.FS_SET_FRAME_ID_CMD,c,f,d._ctx.startTime(),d._watcher.rawRules,d._identity.cookieData(),d._pageId,d.getCurrentSessionEnabled(),d._resourceUploadingEnabled];b&&b.postMessage&&b.postMessage(a.stringify({__fs:f}),"*")};null==this._frameId?this._pendingChildFrameIdInits.push(f):f()};c.prototype.iFrameWndToFsId=function(b){for(var c=0;c<this._iFrames.length;c++)if(this._iFrames[c].contentWindow==
b)return a.fsid(this._iFrames[c]);a.logIfDebug("Unable to locate frame for window");return NaN};return c}();a.AbstractRecorder=c;a.parsePostMessageData=k})(m||(m={}));(function(a){function k(e,d){return new a.HttpEventTransport(e,d)}var h=function(e){function d(b,c,d,g,h){void 0===c&&(c=a.RealTicker);void 0===d&&(d=new a.XHRPoster);void 0===g&&(g=k);void 0===h&&(h=a.defaultInjector);var l=e.call(this,b,c,g,h)||this;l._poster=d;l._domLoaded=!1;l._doc=l._wnd.document;l._frameId=0;l._getCurrentSessionEnabled=
a.GetCurrentSessionEnabledState.NoInfoYet;a.set_fs_shutdown(l._wnd,function(a){l._queue.shutdown();a&&(a=l._doc.getElementById(a))&&a.setAttribute("_fs_embed_token",l._embedToken)});return l}M(d,e);d.prototype.onDomLoad=function(){e.prototype.onDomLoad.call(this);this._domLoaded=!0;this.injectIntegrationScript()};d.prototype.start=function(b,c){var d=this;e.prototype.start.call(this,b,c);var g=this._doc.documentElement,h=a._fs_replay_flags(this._wnd),k=a.tryGetScreenDims(this._wnd),m=k[0],k=k[1],
p="";b||(p=this._identity.userId());g={OrgId:this._identity.orgId(),UserId:p,Url:location.href,Base:a.baseUri(this._doc),Width:g.clientWidth,Height:g.clientHeight,ScreenWidth:m,ScreenHeight:k,Referrer:this._doc.referrer,Doctype:a.doctypeString(this._doc),CompiledTimestamp:a.CompiledTimestamp};h&&(g.ReplayFlags=h);this._poster.post(this._protocol,this._host,"/rec/page",a.stringify(g),function(b){var c;try{c=a.parseJson(b)}catch(e){d.disableBecauseRecPageSaidSo();return}d.handleResponse(c);if(b=a._fs_ready(d._wnd))try{b()}catch(g){a.logIfDebug("exception in _fs_ready(): "+
g)}d._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,[a.baseUri(d._doc),a.doctypeString(d._doc)]);d._queue.startPipeline(c.PageIntId);d.fullyStarted()},function(a){d.disableBecauseRecPageSaidSo()})};d.prototype.setIdsAndCookie=function(b){var c=this._identity;c.setIds(this._wnd,b.CookieDomain,b.UserIntId,b.SessionIntId);this._pageId=b.PageIntId;this._embedToken=b.EmbedToken;a.logIfDebug("/User,"+c.userId()+"/Session,"+c.sessionId()+"/Page,"+b.PageIntId)};d.prototype.injectIntegrationScript=function(){if(this._domLoaded&&
this._integrationScript){var b=this._doc.createElement("script");a._fs_csp(this._wnd)?b.src=this._protocol+this._host+"/rec/integrations?OrgId="+this._orgId:b.text=this._integrationScript;b.async=!0;this._doc.head.appendChild(b)}};d.prototype.handleResponse=function(b){this.setIdsAndCookie(b);this._integrationScript=b.IntegrationScript;this._getCurrentSessionEnabled=b.GetCurrentSessionEnabled?a.GetCurrentSessionEnabledState.Enabled:a.GetCurrentSessionEnabledState.Disabled;b.ResourceUploadingEnabled&&
this.enableResourceUploading();this.injectIntegrationScript();if(b.Blocks)for(var c=0;c<b.Blocks.length;++c)this._watcher.addRule(b.Blocks[c]);if(b.Watches)for(c=0;c<b.Watches.length;++c)this._watcher.addRule(b.Watches[c])};d.prototype.disableBecauseRecPageSaidSo=function(){this.shutdown();a.logIfDebug("Disabling FS.");var b=a._fs_ready(this._wnd);if(b)try{b(!0)}catch(c){a.logIfDebug("exception in _fs_ready(): "+c)}};return d}(a.AbstractRecorder);a.TopRecorder=h})(m||(m={}));(function(a){function k(e,
d){return new a.PostMessageEventTransport(e.getWindow())}a.makeFrameTransport=k;var h=function(e){function d(b,c,d,g,h){void 0===c&&(c=a.RealTicker);void 0===d&&(d=new a.PostMessagePoster);void 0===g&&(g=k);void 0===h&&(h=a.defaultInjector);b=e.call(this,b,c,g,h)||this;b._messagePoster=d;return b}M(d,e);d.prototype.start=function(a,c){e.prototype.start.call(this,a,c);this.sendRequestForFrameId()};d.prototype.postMessageReceived=function(b,c){e.prototype.postMessageReceived.call(this,b,c);switch(c[0]){case a.FS_SET_FRAME_ID_CMD:try{this.setFrameIdFromOutside(c[1],
c[2],c[3],c[4],c[5],c[6],c[7],c[8])}catch(d){a.logIfDebug("Failed to parse frameId from message"+c)}}};d.prototype.sendRequestForFrameId=function(){this._frameId||(0==this._frameId?a.logIfDebug("For some reason the outer window attempted to request a frameId"):this._wnd.parent?(a.logIfDebug("Asking for a frame ID from within frame: "+location.href),this._messagePoster.postMessage(this._wnd.parent,a.FS_REQUEST_FRAME_ID,[])):a.logIfDebug("Orphaned window. Location href = "+location.href))};d.prototype.setFrameIdFromOutside=
function(b,c,d,e,h,k,m,p){if(b)if(this._frameId)a.logIfDebug("frame Id is already set to "+this._frameId+". Received second request to set it to "+b+" Iframe:"+location.href);else{a.logIfDebug("FrameId received within frame "+location.href+": "+b);this._identity.initFromParsedCookie(h);this._getCurrentSessionEnabled=m||a.GetCurrentSessionEnabledState.NoInfoYet;p&&this.enableResourceUploading();this._frameId=b;this._parentIds=c;for(h=0;h<e.length;++h)this._watcher.addRule(e[h]);this._queue.enqueueFirst(a.EVENT_SET_FRAME_BASE,
[a.baseUri(this._wnd.document),a.doctypeString(this._wnd.document)]);this._queue.rebaseIframe(d);this._ctx.setStartTime(d);this._pageId=k;this._queue.startPipeline(k,b,c);this.flushPendingChildFrameInits();this.fullyStarted()}else a.logIfDebug("Outer page gave us a bogus frame Id! Iframe: "+location.href)};return d}(a.AbstractRecorder);a.InnerRecorder=h})(m||(m={}));(function(a){var k=function(){function e(){}e.prototype.createTopRecorder=function(d){return new a.TopRecorder(d)};e.prototype.createInnerRecorder=
function(d){return new a.InnerRecorder(d)};return e}();a.DefaultRecorderMaker=k;var h=function(){function e(a,b){void 0===a&&(a=window);void 0===b&&(b=new k);this.wnd=a;this.recMaker=b;this.protocol="https:";this.domDoneLoaded=!1;this._startTime=this.wallTime();this.splitPending=this.waitingOnStart=!1;this.reidentifyCount=0}e.prototype.init=function(){a.isLoaded(this.wnd)||(a.initWindex(this.wnd),a.setLoaded(this.wnd,a.Namespace(this.wnd)),this.initApi(),this.start())};e.prototype.wallTime=function(){return(new Date).getTime()};
e.prototype.now=function(){return this.wallTime()-this._startTime};e.prototype.startTime=function(){return this._startTime};e.prototype.setStartTime=function(a){this._startTime=a};e.prototype.getHost=function(){return this.host};e.prototype.getProtocol=function(){return this.protocol};e.prototype.getOrgId=function(){return this.orgId};e.prototype.getIdentity=function(){return this.identity};e.prototype.getVars=function(){return this.vars};e.prototype.getWindow=function(){return this.wnd};e.prototype.getCurrentSessionURL=
function(d){if(!this.recorder)return null;var b=this.recorder.getCurrentSessionEnabled();if(b==a.GetCurrentSessionEnabledState.NoInfoYet)return null;var c;c=this.identity.host();c=a.isLocalhost(a.domainFromHost(c))?c:0==c.indexOf("www.")?"app."+c.slice(4):"app."+c;if(b==a.GetCurrentSessionEnabledState.Disabled)return this.protocol+"//"+c+"/opt/upgrade";b=this.getCurrentSession();if(!b)return null;d&&(b+=":"+this.wallTime());return this.protocol+"//"+c+"/ui/"+this.identity.orgId()+"/session/"+encodeURIComponent(b)};
e.prototype.getCurrentSession=function(){if(!this.recorder)return null;var d=this.recorder.getCurrentSessionEnabled();return d!=a.GetCurrentSessionEnabledState.NoInfoYet&&d!=a.GetCurrentSessionEnabledState.Disabled&&this.identity.userId()?this.identity.userId()+":"+this.identity.sessionId():null};e.prototype.enableConsole=function(){this.recorder&&this.recorder.console().enable()};e.prototype.disableConsole=function(){this.recorder&&this.recorder.console().disable()};e.prototype.log=function(a){for(var b=
[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];this.recorder&&("log"!==a&&("info"!==a&&"warn"!==a&&"error"!==a&&"debug"!==a)&&(b.unshift(a),a="log"),this.recorder.console().addLog(a,b))};e.prototype.shutdown=function(){this.recorder?(this.recorder.shutdown(),this.recorder=null):a.logIfDebug("Recording already shut down.")};e.prototype.restart=function(){this.recorder?a.logIfDebug("Recording already started."):this.createRecorder(!0)};e.prototype.splitPage=function(a){this.waitingOnStart?this.splitPending=
!0:(this.shutdown(),a&&this.identity.clear(),this.restart())};e.prototype._api=function(d,b){if(this.inFrame)a.logIfDebug("API calls may only be made from the top-most frame");else if(this.recorder){var c=this.vars.api(d,b),f=c[0];if(c[1]){if(8>this.reidentifyCount){this.reidentifyCount++;a.FS_q_push(this.wnd,[d,b]);this.splitPage(!0);return}a.logIfDebug("reidentified too many times; giving up")}for(c=0;c<f.length;c++)this.recorder.queue().enqueue(f[c].Kind,f[c].Args)}else a.FS_q_push(this.wnd,[d,
b])};e.prototype._cookies=function(){return this.identity.cookies()};e.prototype._setCookie=function(a,b){return this.identity.setCookie(a,b)};e.prototype.initApi=function(){var d=this.wnd[a.Namespace(this.wnd)];d.getCurrentSessionURL=a.$entry(this.getCurrentSessionURL,this);d.getCurrentSession=a.$entry(this.getCurrentSession,this);d.enableConsole=a.$entry(this.enableConsole,this);d.disableConsole=a.$entry(this.disableConsole,this);d.log=a.$entry(this.log,this);d.shutdown=a.$entry(this.shutdown,this);
d.restart=a.$entry(this.restart,this);d._api=a.$entry(this._api,this);d._cookies=a.$entry(this._cookies,this);d._setCookie=a.$entry(this._setCookie,this)};e.prototype.start=function(){var d=this;a.initDebug(this.wnd);a.logIfDebug("script version "+a.CompiledVersion+" (compiled at "+a.CompiledTimestamp+")");this.host=a._fs_host(this.wnd);this.orgId=a._fs_org(this.wnd);this.host?this.orgId?(a.logIfDebug("host: "+this.host),a.logIfDebug("orgid: "+this.orgId),"localhost:8080"==this.host&&(this.protocol=
"http:"),this.identity=new a.Identity,this.inFrame||(this.vars=new a.Vars(this.identity),this.identity.initFromCookies(this.host,this.orgId)),this.canRecord(this.orgId)?(this.createRecorder().eventWatcher().watchEvents(),this.hookLoadEvents(),this.wnd.addEventListener("message",function(b){if("string"==typeof b.data)switch(a.parsePostMessageData(b.data)[0]){case a.FS_SHUTDOWN_FRAME:d.shutdown();break;case a.FS_RESTART_FRAME:d.restart()}})):this.hailMary()):a.logIfDebug("Missing global _fs_org. Recording disabled."):
a.logIfDebug("Missing global _fs_host. Recording disabled.")};e.prototype.createRecorder=function(d){var b=this;this._startTime=this.wallTime();var c,f;if(this.inFrame)this.recorder=this.recMaker.createInnerRecorder(this);else{this.recorder=this.recMaker.createTopRecorder(this);f=this.drainApiQueue(a.FS_q_drain(this.wnd));c=f[0];f=f[1];for(var e=0;e<c.length;e++)this.recorder.queue().enqueue(c[e].Kind,c[e].Args)}this.waitingOnStart=!0;this.recorder.start(f,function(){b.waitingOnStart=!1;d&&b.recorder&&
b.recorder.tellAllFramesTo([a.FS_RESTART_FRAME]);b.splitPending&&(b.splitPending=!1,b.splitPage())});d&&this.recorder.eventWatcher().watchEvents();return this.recorder};e.prototype.drainApiQueue=function(a){if(!a)return[[],!1];for(var b=!1,c=[],e=0;e<a.length;e++){var g=this.vars.api(a[e][0],a[e][1]),h=g[0];g[1]&&(c=[],b=!0);c=c.concat(h)}return[c,b]};e.prototype.determineFrameness=function(d){var b=a._fs_transport(this.wnd);a._fs_is_outer_script(this.wnd)?this.inFrame=!1:this.wnd!=top?this.inFrame=
!0:b?b.init&&b.init(d)&&(this.inFrame=!0):this.inFrame=!1};e.prototype.canRecord=function(d){this.determineFrameness(d);return this.wnd.MutationEvent&&this.wnd.postMessage?!this.inFrame||a._fs_run_in_iframe(this.wnd)||a._fs_transport(this.wnd)?!0:(a.logIfDebug("Fullstory recording for this page is NOT allowed within an iFrame."),!1):(a.logIfDebug("missing required browser features"),!1)};e.prototype.hailMary=function(){var d=this,b=document.documentElement,c=a._fs_replay_flags(this.wnd);a.logIfDebug("Unable to record playback stream.");
var e=document.createElement("script");this.wnd.__fs_startResponse=function(a){a&&d.identity.setIds(d.wnd,a.CookieDomain,a.UserIntId,a.SessionIntId);document.head.removeChild(e)};e.src="//"+this.host+"/rec/page?OrgId="+this.orgId+"&UserId="+this.identity.userId()+"&Url="+encodeURIComponent(location.href)+"&Base="+encodeURIComponent(a.baseUri(document))+"&Width="+b.clientWidth+"&Height="+b.clientHeight+"&ScreenWidth="+this.wnd.screen.width+"&ScreenHeight="+this.wnd.screen.height+"&Referrer="+encodeURIComponent(document.referrer)+
"&Doctype="+encodeURIComponent(a.doctypeString(document))+"&CompiledTimestamp="+a.CompiledTimestamp+"&Fallback=true"+(c?"&ReplayFlags="+c:"");document.head.appendChild(e)};e.prototype.hookLoadEvents=function(){var a=this,b=function(){a.domDoneLoaded||(a.domDoneLoaded=!0,a.recorder&&a.recorder.onDomLoad())},c=!1,e=function(){c||(c=!0,a.recorder&&a.recorder.onLoad())};switch(document.readyState){case "interactive":document.attachEvent||b();break;case "complete":b(),e()}this.domDoneLoaded||document.addEventListener("DOMContentLoaded",
function(a){b()});c||this.wnd.addEventListener("load",function(a){b();e()})};return e}();a.GlobalContext=h})(m||(m={}));try{(new m.GlobalContext).init()}catch(V){m.sendToBugsnag(V,"error"),m._fs_debug(window)&&window.console&&console.log&&console.log("Failed to initialize FullStory.")}})();
